---
layout: default
title: test
---
<h2>{{page.title}}</h2>

<!--
<video width="960" height="520" src="https://flv4.bn.netease.com/videolib3/1711/17/deiQN4763/SD/deiQN4763-mobile.mp4" playsinline muted controls></video>
-->

<style>

/*07121754*/
.vodplayerdiv{width:100%;height:100%}.vodplayercontainer{width:100%;height:100%;position:relative;background-color:black}.vodProgressBar{position:absolute;height:19px;bottom:34px;text-align:center;z-index:8;-webkit-box-sizing:border-box;left:10px;cursor:pointer}.vodBars{position:relative;height:3px;top:8px}.vodBarsHover{height:5px;top:7px;transition:top .2s,height .2s;-moz-transition:top .2s,height .2s;-webkit-transition:top .2s,height .2s;-o-transition:top .2s,height .2s}.vodProgressBg{position:absolute;height:100%;width:100%;background-color:rgba(255,255,255,0.2)}.vodLoadingBar{position:absolute;background-color:rgba(152,145,145,1);width:0;height:100%}.vodLoadingBar div{position:absolute;background-color:rgba(152,145,145,1);height:100%;width:0}.vodPlayingBar{position:absolute;background-color:rgba(240,42,36,1);height:100%;width:0}.vodFocusBarContainer div{position:absolute;background-color:#ffa358;height:100%;width:0}.vodSlider{display:block;position:absolute;height:0;width:0;z-index:100;top:1px;background:url(http://img1.cache.netease.com/video/vod/assets/assets.png) repeat-x -85px -148px}.vodSliderShow{height:16px;width:16px;transform:translate(0,0);-webkit-transform:translate(0,0);border-radius:8px;-moz-border-radius:8px;-webkit-border-radius:8px;animation-name:dh;animation-duration:.2s;animation-iteration-count:1;animation-timing-function:ease-in-out;-webkit-animation-name:dh;-webkit-animation-duration:.2s;-webkit-animation-iteration-count:1;-webkit-animation-timing-function:ease-in-out}@keyframes dh{0{transform:scale(0);-webkit-transform:scale(0)}100%{transform:scale(1);-webkit-transform:scale(1)}}@-webkit-keyframes dh{0{transform:scale(0);-webkit-transform:scale(0)}100%{transform:scale(1);-webkit-transform:scale(1)}}.vodCtrlContainer{position:absolute;height:40px;width:100%;bottom:0;text-align:center;z-index:7;-webkit-box-sizing:border-box;background:url(http://img1.cache.netease.com/video/vod/assets/bg.png) repeat-x -0 -0}.vodCtrlContainer:focus{outline:0}.vodBtns{position:relative}.vodPlayBtn{width:56px;height:40px;position:absolute}.vodPlayBtn div{height:15px;width:15px;background:url(http://img1.cache.netease.com/video/vod/assets/assets.png) no-repeat -15px -90px;cursor:pointer;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);-moz-transform:translateX(-50%) translateY(-50%);-o-transform:translateX(-50%) translateY(-50%)}.vodPlayBtn:hover div{background:url(http://img1.cache.netease.com/video/vod/assets/assets.png) no-repeat -0 -90px}.vodPauseBtn{width:56px;height:40px;position:absolute}.vodPauseBtn div{height:15px;width:12px;background:url(http://img1.cache.netease.com/video/vod/assets/assets.png) no-repeat -30px -90px;cursor:pointer;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);-moz-transform:translateX(-50%) translateY(-50%);-o-transform:translateX(-50%) translateY(-50%)}.vodPauseBtn:hover div{background:url(http://img1.cache.netease.com/video/vod/assets/assets.png) no-repeat -42px -90px}.vodVolumeBtnFull{position:relative;cursor:pointer;width:18px;height:18px;background:url(http://img1.cache.netease.com/video/vod/assets/assets.png) no-repeat -201px -130px;top:50%;left:26px;-webkit-transform:translateX(-11px) translateY(-50%);-ms-transform:translateX(-11px) translateY(-50%);-moz-transform:translateX(-11px) translateY(-50%);-o-transform:translateX(-11px) translateY(-50%)}.vodVolumeBtnHalf{position:relative;cursor:pointer;width:12px;height:15px;background:url(http://img1.cache.netease.com/video/vod/assets/assets.png) no-repeat -189px -130px;top:50%;left:26px;-webkit-transform:translateX(-11px) translateY(-50%);-ms-transform:translateX(-11px) translateY(-50%);-moz-transform:translateX(-11px) translateY(-50%);-o-transform:translateX(-11px) translateY(-50%)}.vodVolumeBtnMuted{position:relative;cursor:pointer;width:16px;height:15px;background:url(http://img1.cache.netease.com/video/vod/assets/assets.png) no-repeat -219px -130px;top:50%;left:26px;-webkit-transform:translateX(-11px) translateY(-50%);-ms-transform:translateX(-11px) translateY(-50%);-moz-transform:translateX(-11px) translateY(-50%);-o-transform:translateX(-11px) translateY(-50%)}.vodVolumeBtn{width:40px;height:40px;position:absolute;left:38px}.vodVolumeBar{position:absolute;height:40px;left:76px;cursor:pointer;width:60px}.vodVolumeBarHover{transition:width .2s ease-in-out;-moz-transition:width .2s ease-in-out;-webkit-transition:width .2s ease-in-out;-o-transition:width .2s ease-in-out;width:60px}.vodVolumeBars{position:relative;top:50%}.vodVolumeBg{position:absolute;height:3px;width:100%;background-color:rgba(255,255,255,0.2)}.vodVolumeMoving{position:absolute;background-color:#fff;width:20%;height:3px}.vodVolumeSlider{position:absolute;width:14px;height:14px;background:white;-moz-border-radius:7px;-webkit-border-radius:7px;border-radius:7px;cursor:pointer;top:14px;display:block;z-index:10}.vodTime{position:absolute;font-family:Arial;font-size:14px;color:white;top:0;padding-top:13px;left:60px;height:27px;width:120px;z-index:6;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vodCheckContainer{right:121px;width:40px;height:20px;position:absolute;font-family:Arial,Microsoft YaHei;font-size:14px;color:#bababa;top:10px;cursor:pointer;z-index:5;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vodSetting{width:40px;height:40px;position:absolute;right:86px}.vodSetting div{cursor:pointer;width:18px;height:18px;background:url(http://img1.cache.netease.com/video/vod/assets/assets.png) no-repeat -82px -90px;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);-moz-transform:translateX(-50%) translateY(-50%);-o-transform:translateX(-50%) translateY(-50%)}.vodSetting:hover div{background:url(http://img1.cache.netease.com/video/vod/assets/assets.png) no-repeat -64px -90px}.vodQualityDisabled{width:40px;height:20px;position:absolute;right:48px;font-family:Microsoft YaHei;font-size:14px;color:#bababa;top:10px;cursor:default;z-index:5;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vodQuality{width:40px;height:20px;position:absolute;right:48px;font-family:Microsoft YaHei;font-size:14px;color:#bababa;top:10px;cursor:pointer;z-index:5;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vodQuality:hover{color:white}.vodFull{width:40px;height:40px;position:absolute;right:10px}.vodFullBtn{cursor:pointer;width:20px;height:16px;background:url(http://img1.cache.netease.com/video/vod/assets/assets.png) no-repeat -237px -0;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);-moz-transform:translateX(-50%) translateY(-50%);-o-transform:translateX(-50%) translateY(-50%)}.vodFullBtn:hover{background:url(http://img1.cache.netease.com/video/vod/assets/assets.png) no-repeat -218px -0}.vodExitFullBtn{cursor:pointer;width:19px;height:16px;background:url(http://img1.cache.netease.com/video/vod/assets/assets.png) no-repeat -199px -0;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);-moz-transform:translateX(-50%) translateY(-50%);-o-transform:translateX(-50%) translateY(-50%)}.vodExitFullBtn:hover{background:url(http://img1.cache.netease.com/video/vod/assets/assets.png) no-repeat -180px -0}.vodAlphaOut{-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;-o-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;opacity:0}.vodAlphaIn{-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;-o-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;opacity:100;filter:alpha(opacity=100)}.vodVideoContainer{height:100%;position:relative;cursor:pointer}.vodVideoContainer:focus{outline:0}.vodVideo{width:100%;vertical-align:middle;position:absolute;top:0;left:0;height:100%}.vodMenu{z-index:200;position:fixed;top:-9999px;left:-9999px;width:150px;background-color:rgba(0,0,0,0.5)}.vodMenu div{cursor:default;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;height:24px;padding-left:8px;padding-top:8px;background-color:rgba(0,0,0,0.5);vertical-align:middle;horiz-align:left;list-style-type:none;color:aliceblue;font-size:13px;font-family:Arial}.vodMenu div a{display:block;color:aliceblue;background-color:rgba(0,0,0,0);text-decoration:none}.vodMenu div.active{background-color:rgba(102,102,102,0.8)}.vodMenu div.active a{color:#fff;background-color:rgba(102,102,102,0)}.vodSettingPanel{color:#fff;font-family:Arial;z-index:180;position:absolute;top:-9990px;left:-9990px;width:100px;height:83px;margin-bottom:10px;background-color:rgba(0,0,0,.7)}.vodSettingPanel div{font-size:14px;position:relative;height:36px;line-height:36px;text-align:center}.vodSettingPanelLine{list-style-type:none;height:1px;background-color:rgba(255,255,255,0.2)}.vodSettingItems{cursor:pointer;margin-top:5px;margin-bottom:5px}.vodSettingItems img{float:left;margin-left:17px;margin-top:14px}.vodSettingItems span{float:right;margin-right:34px}.vodSettingItemHover{background-color:rgba(153,153,153,.7);color:#fff}.vodQualityPanel{font-family:Arial;z-index:170;position:absolute;top:-9990px;left:-9990px;width:100px;height:82px;margin-bottom:10px;background-color:rgba(0,0,0,.7)}.vodQualityPanel div{font-size:14px;position:relative;height:36px;line-height:36px;text-align:center}.vodQualityItems{cursor:pointer;margin-top:5px;margin-bottom:5px}.vodQualityItems img{float:left;margin-left:17px;margin-top:14px}.vodQualityItems span{float:right;margin-right:34px}.vodQualityItemHover{background-color:rgba(153,153,153,.7);color:#fff}.vodTipsContainer{width:100%;position:absolute}.vodTipsContent{font-family:Microsoft YaHei;font-size:16px;color:#f0f0f0;position:absolute;width:100%;text-align:center;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);-moz-transform:translateY(-50%);-o-transform:translateY(-50%)}.vodTipsImg{position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);-moz-transform:translateY(-50%);-o-transform:translateY(-50%)}.vodLoading{display:none;position:absolute;z-index:120;width:64px;height:64px;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);-moz-transform:translateX(-50%) translateY(-50%);-o-transform:translateX(-50%) translateY(-50%);background:url(http://img1.cache.netease.com/video/vod/assets/loadingsprite.png) no-repeat -0 -0;-moz-animation:loadingAnimation 1s steps(22) infinite;-webkit-animation:loadingAnimation 1s steps(22) infinite;animation:loadingAnimation 1s steps(22) infinite}@-webkit-keyframes loadingAnimation{0{background-position:-0 -0}100%{background-position:-1408px -0}}@keyframes loadingAnimation{0{background-position:-0 -0}100%{background-position:-1408px -0}}.vodCoverContainer{display:none;background-color:black;position:absolute;z-index:3;width:100%;height:100%}.vodCoverContainer img{position:absolute}.vodAlertPanel{font-family:Arial;z-index:190;position:absolute;top:-9990px;left:-9990px;width:200px;height:46px;background-color:rgba(0,0,0,.7);cursor:default;padding-left:4px}.vodAlertPanel div{font-size:12px;color:#f0f0f0;height:100%;margin-top:15px;text-align:center}.vodFocusPanel{font-family:Arial;z-index:210;position:absolute;top:-9990px;left:-9990px;width:190px;background-color:rgba(36,31,27,0.7);cursor:default;color:#a7a7a7}.vodFocusPanel div{font-size:14px}.vodRatePanel{font-family:Arial;font-size:14px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:220;position:absolute;top:-9990px;left:-9990px;width:190px;height:90px;background-color:rgba(36,31,27,0.7);cursor:default;color:#dcdcdc}.vodRatePanel div{line-height:30px}.vodRatePanel input{margin-left:6px}.vodRatePanelTitle{text-align:left;padding-left:6px}.vodRatePanelClose{width:50px;margin:auto;text-align:center;cursor:pointer}

</style>

<script>
/*
 RequireJS 2.2.0 Copyright jQuery Foundation and other contributors.
 Released under MIT license, http://github.com/requirejs/requirejs/LICENSE
*/
var requirejs,require,define;
(function(ga){function ka(b,c,d,g){return g||""}function K(b){return"[object Function]"===Q.call(b)}function L(b){return"[object Array]"===Q.call(b)}function y(b,c){if(b){var d;for(d=0;d<b.length&&(!b[d]||!c(b[d],d,b));d+=1);}}function X(b,c){if(b){var d;for(d=b.length-1;-1<d&&(!b[d]||!c(b[d],d,b));--d);}}function x(b,c){return la.call(b,c)}function e(b,c){return x(b,c)&&b[c]}function D(b,c){for(var d in b)if(x(b,d)&&c(b[d],d))break}function Y(b,c,d,g){c&&D(c,function(c,e){if(d||!x(b,e))!g||"object"!==
typeof c||!c||L(c)||K(c)||c instanceof RegExp?b[e]=c:(b[e]||(b[e]={}),Y(b[e],c,d,g))});return b}function z(b,c){return function(){return c.apply(b,arguments)}}function ha(b){throw b;}function ia(b){if(!b)return b;var c=ga;y(b.split("."),function(b){c=c[b]});return c}function F(b,c,d,g){c=Error(c+"\nhttp://requirejs.org/docs/errors.html#"+b);c.requireType=b;c.requireModules=g;d&&(c.originalError=d);return c}function ma(b){function c(a,n,b){var h,k,f,c,d,l,g,r;n=n&&n.split("/");var q=p.map,m=q&&q["*"];
if(a){a=a.split("/");k=a.length-1;p.nodeIdCompat&&U.test(a[k])&&(a[k]=a[k].replace(U,""));"."===a[0].charAt(0)&&n&&(k=n.slice(0,n.length-1),a=k.concat(a));k=a;for(f=0;f<k.length;f++)c=k[f],"."===c?(k.splice(f,1),--f):".."===c&&0!==f&&(1!==f||".."!==k[2])&&".."!==k[f-1]&&0<f&&(k.splice(f-1,2),f-=2);a=a.join("/")}if(b&&q&&(n||m)){k=a.split("/");f=k.length;a:for(;0<f;--f){d=k.slice(0,f).join("/");if(n)for(c=n.length;0<c;--c)if(b=e(q,n.slice(0,c).join("/")))if(b=e(b,d)){h=b;l=f;break a}!g&&m&&e(m,d)&&
(g=e(m,d),r=f)}!h&&g&&(h=g,l=r);h&&(k.splice(0,l,h),a=k.join("/"))}return(h=e(p.pkgs,a))?h:a}function d(a){E&&y(document.getElementsByTagName("script"),function(n){if(n.getAttribute("data-requiremodule")===a&&n.getAttribute("data-requirecontext")===l.contextName)return n.parentNode.removeChild(n),!0})}function m(a){var n=e(p.paths,a);if(n&&L(n)&&1<n.length)return n.shift(),l.require.undef(a),l.makeRequire(null,{skipMap:!0})([a]),!0}function r(a){var n,b=a?a.indexOf("!"):-1;-1<b&&(n=a.substring(0,
b),a=a.substring(b+1,a.length));return[n,a]}function q(a,n,b,h){var k,f,d=null,g=n?n.name:null,p=a,q=!0,m="";a||(q=!1,a="_@r"+(Q+=1));a=r(a);d=a[0];a=a[1];d&&(d=c(d,g,h),f=e(v,d));a&&(d?m=f&&f.normalize?f.normalize(a,function(a){return c(a,g,h)}):-1===a.indexOf("!")?c(a,g,h):a:(m=c(a,g,h),a=r(m),d=a[0],m=a[1],b=!0,k=l.nameToUrl(m)));b=!d||f||b?"":"_unnormalized"+(T+=1);return{prefix:d,name:m,parentMap:n,unnormalized:!!b,url:k,originalName:p,isDefine:q,id:(d?d+"!"+m:m)+b}}function u(a){var b=a.id,
c=e(t,b);c||(c=t[b]=new l.Module(a));return c}function w(a,b,c){var h=a.id,k=e(t,h);if(!x(v,h)||k&&!k.defineEmitComplete)if(k=u(a),k.error&&"error"===b)c(k.error);else k.on(b,c);else"defined"===b&&c(v[h])}function A(a,b){var c=a.requireModules,h=!1;if(b)b(a);else if(y(c,function(b){if(b=e(t,b))b.error=a,b.events.error&&(h=!0,b.emit("error",a))}),!h)g.onError(a)}function B(){V.length&&(y(V,function(a){var b=a[0];"string"===typeof b&&(l.defQueueMap[b]=!0);G.push(a)}),V=[])}function C(a){delete t[a];
delete Z[a]}function J(a,b,c){var h=a.map.id;a.error?a.emit("error",a.error):(b[h]=!0,y(a.depMaps,function(h,f){var d=h.id,g=e(t,d);!g||a.depMatched[f]||c[d]||(e(b,d)?(a.defineDep(f,v[d]),a.check()):J(g,b,c))}),c[h]=!0)}function H(){var a,b,c=(a=1E3*p.waitSeconds)&&l.startTime+a<(new Date).getTime(),h=[],k=[],f=!1,g=!0;if(!aa){aa=!0;D(Z,function(a){var l=a.map,e=l.id;if(a.enabled&&(l.isDefine||k.push(a),!a.error))if(!a.inited&&c)m(e)?f=b=!0:(h.push(e),d(e));else if(!a.inited&&a.fetched&&l.isDefine&&
(f=!0,!l.prefix))return g=!1});if(c&&h.length)return a=F("timeout","Load timeout for modules: "+h,null,h),a.contextName=l.contextName,A(a);g&&y(k,function(a){J(a,{},{})});c&&!b||!f||!E&&!ja||ba||(ba=setTimeout(function(){ba=0;H()},50));aa=!1}}function I(a){x(v,a[0])||u(q(a[0],null,!0)).init(a[1],a[2])}function O(a){a=a.currentTarget||a.srcElement;var b=l.onScriptLoad;a.detachEvent&&!ca?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1);b=l.onScriptError;a.detachEvent&&!ca||a.removeEventListener("error",
b,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")}}function P(){var a;for(B();G.length;){a=G.shift();if(null===a[0])return A(F("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));I(a)}l.defQueueMap={}}var aa,da,l,R,ba,p={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},t={},Z={},ea={},G=[],v={},W={},fa={},Q=1,T=1;R={require:function(a){return a.require?a.require:a.require=l.makeRequire(a.map)},exports:function(a){a.usingExports=!0;if(a.map.isDefine)return a.exports?
v[a.map.id]=a.exports:a.exports=v[a.map.id]={}},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return e(p.config,a.map.id)||{}},exports:a.exports||(a.exports={})}}};da=function(a){this.events=e(ea,a.id)||{};this.map=a;this.shim=e(p.shim,a.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};da.prototype={init:function(a,b,c,h){h=h||{};if(!this.inited){this.factory=b;if(c)this.on("error",c);else this.events.error&&
(c=z(this,function(a){this.emit("error",a)}));this.depMaps=a&&a.slice(0);this.errback=c;this.inited=!0;this.ignore=h.ignore;h.enabled||this.enabled?this.enable():this.check()}},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,--this.depCount,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0;l.startTime=(new Date).getTime();var a=this.map;if(this.shim)l.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],z(this,function(){return a.prefix?this.callPlugin():
this.load()}));else return a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;W[a]||(W[a]=!0,l.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id;b=this.depExports;var h=this.exports,k=this.factory;if(!this.inited)x(l.defQueueMap,c)||this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(K(k)){if(this.events.error&&this.map.isDefine||g.onError!==
ha)try{h=l.execCb(c,k,b,h)}catch(d){a=d}else h=l.execCb(c,k,b,h);this.map.isDefine&&void 0===h&&((b=this.module)?h=b.exports:this.usingExports&&(h=this.exports));if(a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",A(this.error=a)}else h=k;this.exports=h;if(this.map.isDefine&&!this.ignore&&(v[c]=h,g.onResourceLoad)){var f=[];y(this.depMaps,function(a){f.push(a.normalizedMap||a)});g.onResourceLoad(l,this.map,f)}C(c);
this.defined=!0}this.defining=!1;this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}},callPlugin:function(){var a=this.map,b=a.id,d=q(a.prefix);this.depMaps.push(d);w(d,"defined",z(this,function(h){var k,f,d=e(fa,this.map.id),M=this.map.name,r=this.map.parentMap?this.map.parentMap.name:null,m=l.makeRequire(a.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(h.normalize&&(M=h.normalize(M,function(a){return c(a,r,!0)})||
""),f=q(a.prefix+"!"+M,this.map.parentMap),w(f,"defined",z(this,function(a){this.map.normalizedMap=f;this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),h=e(t,f.id)){this.depMaps.push(f);if(this.events.error)h.on("error",z(this,function(a){this.emit("error",a)}));h.enable()}}else d?(this.map.url=l.nameToUrl(d),this.load()):(k=z(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),k.error=z(this,function(a){this.inited=!0;this.error=a;a.requireModules=[b];D(t,function(a){0===
a.map.id.indexOf(b+"_unnormalized")&&C(a.map.id)});A(a)}),k.fromText=z(this,function(h,c){var d=a.name,f=q(d),M=S;c&&(h=c);M&&(S=!1);u(f);x(p.config,b)&&(p.config[d]=p.config[b]);try{g.exec(h)}catch(e){return A(F("fromtexteval","fromText eval for "+b+" failed: "+e,e,[b]))}M&&(S=!0);this.depMaps.push(f);l.completeLoad(d);m([d],k)}),h.load(a.name,m,k,p))}));l.enable(d,this);this.pluginMaps[d.id]=d},enable:function(){Z[this.map.id]=this;this.enabling=this.enabled=!0;y(this.depMaps,z(this,function(a,
b){var c,h;if("string"===typeof a){a=q(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap);this.depMaps[b]=a;if(c=e(R,a.id)){this.depExports[b]=c(this);return}this.depCount+=1;w(a,"defined",z(this,function(a){this.undefed||(this.defineDep(b,a),this.check())}));this.errback?w(a,"error",z(this,this.errback)):this.events.error&&w(a,"error",z(this,function(a){this.emit("error",a)}))}c=a.id;h=t[c];x(R,c)||!h||h.enabled||l.enable(a,this)}));D(this.pluginMaps,z(this,function(a){var b=e(t,a.id);
b&&!b.enabled&&l.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]);c.push(b)},emit:function(a,b){y(this.events[a],function(a){a(b)});"error"===a&&delete this.events[a]}};l={config:p,contextName:b,registry:t,defined:v,urlFetched:W,defQueue:G,defQueueMap:{},Module:da,makeModuleMap:q,nextTick:g.nextTick,onError:A,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");if("string"===typeof a.urlArgs){var b=
a.urlArgs;a.urlArgs=function(a,c){return(-1===c.indexOf("?")?"?":"&")+b}}var c=p.shim,h={paths:!0,bundles:!0,config:!0,map:!0};D(a,function(a,b){h[b]?(p[b]||(p[b]={}),Y(p[b],a,!0,!0)):p[b]=a});a.bundles&&D(a.bundles,function(a,b){y(a,function(a){a!==b&&(fa[a]=b)})});a.shim&&(D(a.shim,function(a,b){L(a)&&(a={deps:a});!a.exports&&!a.init||a.exportsFn||(a.exportsFn=l.makeShimExports(a));c[b]=a}),p.shim=c);a.packages&&y(a.packages,function(a){var b;a="string"===typeof a?{name:a}:a;b=a.name;a.location&&
(p.paths[b]=a.location);p.pkgs[b]=a.name+"/"+(a.main||"main").replace(na,"").replace(U,"")});D(t,function(a,b){a.inited||a.map.unnormalized||(a.map=q(b,null,!0))});(a.deps||a.callback)&&l.require(a.deps||[],a.callback)},makeShimExports:function(a){return function(){var b;a.init&&(b=a.init.apply(ga,arguments));return b||a.exports&&ia(a.exports)}},makeRequire:function(a,n){function m(c,d,f){var e,r;n.enableBuildCallback&&d&&K(d)&&(d.__requireJsBuild=!0);if("string"===typeof c){if(K(d))return A(F("requireargs",
"Invalid require call"),f);if(a&&x(R,c))return R[c](t[a.id]);if(g.get)return g.get(l,c,a,m);e=q(c,a,!1,!0);e=e.id;return x(v,e)?v[e]:A(F("notloaded",'Module name "'+e+'" has not been loaded yet for context: '+b+(a?"":". Use require([])")))}P();l.nextTick(function(){P();r=u(q(null,a));r.skipMap=n.skipMap;r.init(c,d,f,{enabled:!0});H()});return m}n=n||{};Y(m,{isBrowser:E,toUrl:function(b){var d,f=b.lastIndexOf("."),g=b.split("/")[0];-1!==f&&("."!==g&&".."!==g||1<f)&&(d=b.substring(f,b.length),b=b.substring(0,
f));return l.nameToUrl(c(b,a&&a.id,!0),d,!0)},defined:function(b){return x(v,q(b,a,!1,!0).id)},specified:function(b){b=q(b,a,!1,!0).id;return x(v,b)||x(t,b)}});a||(m.undef=function(b){B();var c=q(b,a,!0),f=e(t,b);f.undefed=!0;d(b);delete v[b];delete W[c.url];delete ea[b];X(G,function(a,c){a[0]===b&&G.splice(c,1)});delete l.defQueueMap[b];f&&(f.events.defined&&(ea[b]=f.events),C(b))});return m},enable:function(a){e(t,a.id)&&u(a).enable()},completeLoad:function(a){var b,c,d=e(p.shim,a)||{},g=d.exports;
for(B();G.length;){c=G.shift();if(null===c[0]){c[0]=a;if(b)break;b=!0}else c[0]===a&&(b=!0);I(c)}l.defQueueMap={};c=e(t,a);if(!b&&!x(v,a)&&c&&!c.inited)if(!p.enforceDefine||g&&ia(g))I([a,d.deps||[],d.exportsFn]);else return m(a)?void 0:A(F("nodefine","No define call for "+a,null,[a]));H()},nameToUrl:function(a,b,c){var d,k,f,m;(d=e(p.pkgs,a))&&(a=d);if(d=e(fa,a))return l.nameToUrl(d,b,c);if(g.jsExtRegExp.test(a))d=a+(b||"");else{d=p.paths;k=a.split("/");for(f=k.length;0<f;--f)if(m=k.slice(0,f).join("/"),
m=e(d,m)){L(m)&&(m=m[0]);k.splice(0,f,m);break}d=k.join("/");d+=b||(/^data\:|^blob\:|\?/.test(d)||c?"":".js");d=("/"===d.charAt(0)||d.match(/^[\w\+\.\-]+:/)?"":p.baseUrl)+d}return p.urlArgs&&!/^blob\:/.test(d)?d+p.urlArgs(a,d):d},load:function(a,b){g.load(l,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||oa.test((a.currentTarget||a.srcElement).readyState))N=null,a=O(a),l.completeLoad(a.id)},onScriptError:function(a){var b=O(a);if(!m(b.id)){var c=[];
D(t,function(a,d){0!==d.indexOf("_@r")&&y(a.depMaps,function(a){if(a.id===b.id)return c.push(d),!0})});return A(F("scripterror",'Script error for "'+b.id+(c.length?'", needed by: '+c.join(", "):'"'),a,[b.id]))}}};l.require=l.makeRequire();return l}function pa(){if(N&&"interactive"===N.readyState)return N;X(document.getElementsByTagName("script"),function(b){if("interactive"===b.readyState)return N=b});return N}var g,B,C,H,O,I,N,P,u,T,qa=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,ra=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,
U=/\.js$/,na=/^\.\//;B=Object.prototype;var Q=B.toString,la=B.hasOwnProperty,E=!("undefined"===typeof window||"undefined"===typeof navigator||!window.document),ja=!E&&"undefined"!==typeof importScripts,oa=E&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,ca="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),J={},w={},V=[],S=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(K(requirejs))return;w=requirejs;requirejs=void 0}"undefined"===typeof require||
K(require)||(w=require,require=void 0);g=requirejs=function(b,c,d,m){var r,q="_";L(b)||"string"===typeof b||(r=b,L(c)?(b=c,c=d,d=m):b=[]);r&&r.context&&(q=r.context);(m=e(J,q))||(m=J[q]=g.s.newContext(q));r&&m.configure(r);return m.require(b,c,d)};g.config=function(b){return g(b)};g.nextTick="undefined"!==typeof setTimeout?function(b){setTimeout(b,4)}:function(b){b()};require||(require=g);g.version="2.2.0";g.jsExtRegExp=/^\/|:|\?|\.js$/;g.isBrowser=E;B=g.s={contexts:J,newContext:ma};g({});y(["toUrl",
"undef","defined","specified"],function(b){g[b]=function(){var c=J._;return c.require[b].apply(c,arguments)}});E&&(C=B.head=document.getElementsByTagName("head")[0],H=document.getElementsByTagName("base")[0])&&(C=B.head=H.parentNode);g.onError=ha;g.createNode=function(b,c,d){c=b.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");c.type=b.scriptType||"text/javascript";c.charset="utf-8";c.async=!0;return c};g.load=function(b,c,d){var m=b&&b.config||
{},e;if(E){e=g.createNode(m,c,d);e.setAttribute("data-requirecontext",b.contextName);e.setAttribute("data-requiremodule",c);!e.attachEvent||e.attachEvent.toString&&0>e.attachEvent.toString().indexOf("[native code")||ca?(e.addEventListener("load",b.onScriptLoad,!1),e.addEventListener("error",b.onScriptError,!1)):(S=!0,e.attachEvent("onreadystatechange",b.onScriptLoad));e.src=d;if(m.onNodeCreated)m.onNodeCreated(e,m,c,d);P=e;H?C.insertBefore(e,H):C.appendChild(e);P=null;return e}if(ja)try{setTimeout(function(){},
0),importScripts(d),b.completeLoad(c)}catch(q){b.onError(F("importscripts","importScripts failed for "+c+" at "+d,q,[c]))}};E&&!w.skipDataMain&&X(document.getElementsByTagName("script"),function(b){C||(C=b.parentNode);if(O=b.getAttribute("data-main"))return u=O,w.baseUrl||-1!==u.indexOf("!")||(I=u.split("/"),u=I.pop(),T=I.length?I.join("/")+"/":"./",w.baseUrl=T),u=u.replace(U,""),g.jsExtRegExp.test(u)&&(u=O),w.deps=w.deps?w.deps.concat(u):[u],!0});define=function(b,c,d){var e,g;"string"!==typeof b&&
(d=c,c=b,b=null);L(c)||(d=c,c=null);!c&&K(d)&&(c=[],d.length&&(d.toString().replace(qa,ka).replace(ra,function(b,d){c.push(d)}),c=(1===d.length?["require"]:["require","exports","module"]).concat(c)));S&&(e=P||pa())&&(b||(b=e.getAttribute("data-requiremodule")),g=J[e.getAttribute("data-requirecontext")]);g?(g.defQueue.push([b,c,d]),g.defQueueMap[b]=!0):V.push([b,c,d])};define.amd={jQuery:!0};g.exec=function(b){return eval(b)};g(w)}})(this);







var __extends=(this&&this.__extends)||(function(){var a=Object.setPrototypeOf||({__proto__:[]} instanceof Array&&function(e,c){e.__proto__=c})||function(f,c){for(var e in c){if(c.hasOwnProperty(e)){f[e]=c[e]}}};return function(f,c){a(f,c);function e(){this.constructor=f}f.prototype=c===null?Object.create(c):(e.prototype=c.prototype,new e())}})();define("com/vod/vodplayer/E",["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:true});var c=(function(){function d(){this.dispatcher=document.createElement("vodPlayerDispatcher")}d.prototype.dispatch=function(g){try{this.dispatcher.dispatchEvent(new Event(g))}catch(f){var e=document.createEvent("HTMLEvents");e.initEvent(g,false,true);this.dispatcher.dispatchEvent(e)}};d.IMG_LOADED="IMG_LOADED";d.IMG_FAILED="IMG_FAILED";d.IP_LOADED="IP_LOADED";d.IP_FAILED="IP_FAILED";d.IP_ALLOWED="ip_allowed";d.IP_FORBIDDEN="ip_forbidden";d.MOVIEINFO_LOADED="MOVIEINFO_LOADED";d.MOVIEINFO_FAILED="MOVIEINFO_FAILED";d.NO_SD="NO_SD";d.NO_HD="NO_HD";d.CHANGE_VOLUME="change_volume";d.CHANGE_SCALE="CHANGE_SCALE";d.CHANGE_QUALITY="CHANGE_QUALITY";d.CLICK_DOCUMENT="CLICK_DOCUMENT";d.SNAPSHOT="SNAPSHOT";d.VIDEO_URL="VIDEO_URL";d.PLAY_COMPLETE="play_complete";d.PLAY_ING="PLAY_ING";d.STH_WRONG="STH_WRONG";d.REMOVE_COVER="REMOVE_COVER";d.LOADING="LOADING";d.COVER_URL="COVER_URL";d.ALERT="ALERT";d.VTYPE="VTYPE";d.PLAYBACKRATE="PLAYBACKRATE";d.DISPOSE="DISPOSE";d.HLS_SRC="HLS_SRC";d.HLS_MANIFEST_PARSED="MANIFEST_PARSED";d.FLV_SRC="FLV_SRC";d.LOAD_START="loadstart";d.LOADED_METADATA="loadedmetadata";d.DURATION_CHANGE="durationchange";d.LOADED_DATA="loadeddata";d.PROGRESS="progress";d.CAN_PLAY="canplay";d.CAN_PLAY_THROUGH="canplaythrough";d.TIME_UPDATE="timeupdate";d.PLAY="play";d.PLAYING="playing";d.PAUSE="pause";d.ENDED="ended";d.EMPTIED="emptied";d.STALLED="stalled";d.SEEKING="seeking";d.SEEKED="seeked";d.WAITING="waiting";d.VOLUME_CHANGE="volumechange";d.ERROR="error";return d}());a.E=c});define("com/vod/vodplayer/view/utils/U",["require","exports","D"],function(d,c,a){Object.defineProperty(c,"__esModule",{value:true});var b=(function(){function e(f){this.headerID=f+"_"}e.prototype.e=function(f){return document.getElementById(this.headerID+f)};e.prototype.width=function(g,f){if(typeof g==="string"){this.e(g).style.width=Math.round(f)+"px"}else{g.style.width=Math.round(f)+"px"}};e.prototype.height=function(g,f){if(typeof g==="string"){this.e(g).style.height=Math.round(f)+"px"}else{g.style.height=Math.round(f)+"px"}};e.prototype.x=function(g,f){if(typeof g==="string"){this.e(g.toString()).style.left=Math.round(f)+"px"}else{g.style.left=Math.round(f)+"px"}};e.prototype.y=function(g,f){if(typeof g==="string"){this.e(g.toString()).style.top=Math.round(f)+"px"}else{g.style.top=Math.round(f)+"px"}};e.prototype.getX=function(g){if(typeof g==="string"){var f=Number(this.e(g.toString()).style.left.split("px")[0]);return f}else{return Number(g.style.left.split("px")[0])}};e.prototype.getY=function(g){if(typeof g==="string"){var f=Number(this.e(g.toString()).style.top.split("px")[0]);return f}else{return Number(g.style.top.split("px")[0])}};e.prototype.getWidth=function(f){if(typeof f==="string"){return Math.round(this.e(f).clientWidth)}else{return Math.round(f.clientWidth)}};e.prototype.getHeight=function(f){if(typeof f==="string"){return Math.round(this.e(f).clientHeight)}else{return Math.round(f.clientHeight)}};e.prototype.css=function(g,f){this.e(g).className=f};e.prototype.display=function(g,f){if(g===undefined){a.D.d("U.display, obj=undefined");return}if(typeof g==="string"){this.e(g.toString()).style.display=f}else{g.style.display=f}};e.prototype.getDisplay=function(f){if(typeof f==="string"){return this.e(f).style.display}else{return f.style.display}};e.prototype.removeChildren=function(h){var g;if(typeof h==="string"){g=this.e(h.toString()).childNodes;for(var f=g.length-1;f>-1;f--){this.e(h.toString()).removeChild(g[0])}}else{g=h.childNodes;for(var f=g.length-1;f>-1;f--){h.removeChild(g[0])}}};e.prototype.formatTime=function(i){if(isNaN(i)||i<=0){return"00:00"}var h=Math.floor(i/60);var g=Math.floor(i%60);var f="";if(h<10){f+="0"}f+=h;f+=":";if(g<10){f+="0"}f+=g;return f};return e}());c.U=b});define("D",["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:true});var c=(function(){function d(){}d.consolelog=function(f){try{console.log("%c"+f,"color:green; background-color:yellow")}catch(e){}};d.d=function(g,e){if(e===void 0){e=false}if(document.domain!=="localhost"){return}if(this.consoleDiv){var f="<b>["+this.logTime()+"] [DEBUG]</b> "+g.toString()+"<br>";if(e){this.consoleDiv.innerHTML=f}else{this.consoleDiv.innerHTML+=f}}else{if(!this.consoleDiv){this.getConsole();this.d(g,e)}}};d.w=function(g,e){if(e===void 0){e=false}if(document.domain!=="localhost"){return}console.warn(g);if(this.consoleDiv){var f="<span style='color:#FC3'><b>["+this.logTime()+"] [WARN]</b> "+g.toString()+"</span><br>";if(e){this.consoleDiv.innerHTML=f}else{this.consoleDiv.innerHTML+=f}}else{if(!this.consoleDiv){this.getConsole();this.w(g,e)}}};d.e=function(g,e){if(e===void 0){e=false}console.error(g.toString());if(document.domain!=="localhost"){return}if(this.consoleDiv){var f="<span style='color:#F00'><b>["+this.logTime()+"] [ERROR]</b> "+g.toString()+"</span><br>";if(e){this.consoleDiv.innerHTML=f}else{this.consoleDiv.innerHTML+=f}}else{if(!this.consoleDiv){this.getConsole();this.e(g,e)}}};d.getConsole=function(){this.consoleDiv=document.getElementById("vodConsole")};d.logTime=function(){var l=new Date();var n=l.getFullYear().toString();var e=(l.getMonth()+1).toString();if(Number(e)<10){e="0"+e}var f=l.getDate().toString();if(Number(f)<10){f="0"+f}var j=l.getHours().toString();if(Number(j)<10){j="0"+j}var k=l.getMinutes().toString();if(Number(k)<10){k="0"+k}var i=l.getSeconds().toString();if(Number(i)<10){i="0"+i}var g=l.getMilliseconds().toString();if(g.length===1){g="00"+g}else{if(g.length===2){g="0"+g}}return n+"-"+e+"-"+f+" "+j+":"+k+":"+i+"."+g};return d}());a.D=c});define("com/vod/vodplayer/model/Model",["require","exports","com/vod/vodplayer/E"],function(b,a,c){Object.defineProperty(a,"__esModule",{value:true});var d=(function(e){__extends(f,e);function f(){var g=e!==null&&e.apply(this,arguments)||this;g.IdHeader="";g.PlayComplete=0;g.Playing=false;g.Loading=false;g.Timeupdate=0;g.Progress=0;g.Durantion=0;g.Seeked=false;g.Volume=0;g.Scale=0;g.Quality="";g.ClickDoc="";g.Issue=-1;g.RemoveCover=false;g.CoverURL="";g.NoThisQuality="";g.AlertWindow="";g.VType=0;g.HlsSrc="";g.FlvSrc="";g.PlaybackRate=1;g.Dispose=false;return g}Object.defineProperty(f.prototype,"u",{get:function(){return this.U},set:function(g){this.U=g},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"idHeader",{get:function(){return this.IdHeader},set:function(g){this.IdHeader=g},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"playComplete",{get:function(){return this.PlayComplete},set:function(g){this.PlayComplete=g;if(g){this.dispatch(c.E.PLAY_COMPLETE)}},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"playing",{get:function(){return this.Playing},set:function(g){this.Playing=g;this.dispatch(c.E.PLAY_ING)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"loading",{get:function(){return this.Loading},set:function(g){this.Loading=g;this.dispatch(c.E.LOADING)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"timeupdate",{get:function(){return this.Timeupdate},set:function(g){this.Timeupdate=g;this.dispatch(c.E.TIME_UPDATE)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"progress",{get:function(){return this.Progress},set:function(g){this.Progress=g;this.dispatch(c.E.PROGRESS)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"duration",{get:function(){return this.Durantion},set:function(g){this.Durantion=g;this.dispatch(c.E.DURATION_CHANGE)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"seeked",{get:function(){return this.Seeked},set:function(g){this.Seeked=g;this.dispatch(c.E.SEEKED)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"volume",{get:function(){return this.Volume},set:function(g){this.Volume=g;this.dispatch(c.E.VOLUME_CHANGE)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"scale",{get:function(){return this.Scale},set:function(g){this.Scale=g;this.dispatch(c.E.CHANGE_SCALE)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"quality",{get:function(){return this.Quality},set:function(g){this.Quality=g;this.dispatch(c.E.CHANGE_QUALITY)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"clickDoc",{get:function(){return this.ClickDoc},set:function(g){this.ClickDoc=g;this.dispatch(c.E.CLICK_DOCUMENT)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"snapshot",{set:function(g){if(g){this.dispatch(c.E.SNAPSHOT)}},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"issue",{get:function(){return this.Issue},set:function(g){this.Issue=g;this.dispatch(c.E.STH_WRONG)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"removeCover",{get:function(){return this.RemoveCover},set:function(g){this.RemoveCover=g;this.dispatch(c.E.REMOVE_COVER)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"coverURL",{get:function(){return this.CoverURL},set:function(g){this.CoverURL=g;this.dispatch(c.E.COVER_URL)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"noThisQuality",{get:function(){return this.NoThisQuality},set:function(g){this.NoThisQuality=g;if(g==="sd"){this.dispatch(c.E.NO_SD)}else{if(g==="hd"){this.dispatch(c.E.NO_HD)}}},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"alertWindow",{get:function(){return this.AlertWindow},set:function(g){this.AlertWindow=g;this.dispatch(c.E.ALERT)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"vType",{get:function(){return this.VType},set:function(g){this.VType=g;this.dispatch(c.E.VTYPE)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"hlsSrc",{get:function(){return this.HlsSrc},set:function(g){this.HlsSrc=g;this.dispatch(c.E.HLS_SRC)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"flvSrc",{get:function(){return this.FlvSrc},set:function(g){this.FlvSrc=g;this.dispatch(c.E.FLV_SRC)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"playbackRate",{get:function(){return this.PlaybackRate},set:function(g){this.PlaybackRate=g;this.dispatch(c.E.PLAYBACKRATE)},enumerable:true,configurable:true});Object.defineProperty(f.prototype,"dispose",{get:function(){return this.Dispose},set:function(g){this.Dispose=g;this.dispatch(c.E.DISPOSE)},enumerable:true,configurable:true});return f}(c.E));a.Model=d});define("G",["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:true});var c=(function(){function d(){}d.version="VODPlayer 0.8.0.24";d.channel="vodplayer";d.stageWidth={};d.stageHeight={};d.params={};d.movieInfo={};d.mURL={};d.bURL={};d.onStage=false;return d}());a.G=c});define("com/vod/vodplayer/controller/params/CDN",["require","exports","D","G"],function(b,a,e,d){Object.defineProperty(a,"__esModule",{value:true});var c=(function(){function f(){}f.cdn=function(l){if(d.G.movieInfo[l.idHeader].sdArr.length===2||d.G.movieInfo[l.idHeader].hdArr.length===2){this.pctArr=this.twoPCTArr}else{this.pctArr=this.defaultPCTArr}e.D.d("this.pctArr: "+this.pctArr);var p=[];var o=[0];for(var n=0;n<this.pctArr.length;n++){p.push(Number(this.pctArr[n]))}for(var k=0;k<p.length-1;k++){o.push(o[k]+p[k])}function q(){var s=Math.round(Math.random()*100);var t;if(s<=o[1]){t=0}else{if(s>o[o.length-1]){t=o.length-1}else{var j=o.length;for(var m=1;m<(j-1);m++){if(s>o[m]&&s<=o[m+1]){t=m;break}}}}return t}var h=q();var g;if(p.indexOf(100)>=0){g=h}else{while(true){g=q();if(h!==g){break}}}e.D.d("m:"+h+", b:"+g);if(d.G.movieInfo[l.idHeader].sdArr.length>=2){d.G.mURL.sd=d.G.movieInfo[l.idHeader].sdArr[h];d.G.bURL.sd=d.G.movieInfo[l.idHeader].sdArr[g]}if(d.G.movieInfo[l.idHeader].hdArr.length>=2){d.G.mURL.hd=d.G.movieInfo[l.idHeader].hdArr[h];d.G.bURL.hd=d.G.movieInfo[l.idHeader].hdArr[g]}e.D.d("主sd："+d.G.mURL.sd+", 主hd："+d.G.mURL.hd);e.D.d("备sd："+d.G.bURL.sd+", 备hd："+d.G.bURL.hd);d.G.params[l.idHeader].sid===""?d.G.params[l.idHeader].sid=d.G.mURL.sd:d.G.params[l.idHeader].sid;d.G.params[l.idHeader].vid===""?d.G.params[l.idHeader].vid=d.G.mURL.sd:d.G.params[l.idHeader].vid;e.D.d("sid: "+d.G.params[l.idHeader].sid);e.D.d("vid: "+d.G.params[l.idHeader].vid)};f.pctArr=[];f.defaultPCTArr=[40,20,40];f.twoPCTArr=[50,50];return f}());a.CDN=c});define("com/vod/vodplayer/controller/utils/LoadJSON",["require","exports","com/vod/vodplayer/E"],function(b,a,d){Object.defineProperty(a,"__esModule",{value:true});var c=(function(f){__extends(e,f);function e(){var g=f!==null&&f.apply(this,arguments)||this;g.xmlhttp=new XMLHttpRequest();g.READY_STATE_CHANGE="readystatechange";return g}e.prototype.setVideoJSON=function(g){this.json=JSON.parse('{"all":{"flvUrl":{"flv":["'+g+'","'+g+'"]},"title":"","totaltime":"","tags":"","pltype":"","stree":"","pageUrl":""}}')};e.prototype.load=function(g,h,i){this.successEvent=h;this.failEvent=i;this.xmlhttp.addEventListener(this.READY_STATE_CHANGE,this.stateChange.bind(this));this.xmlhttp.open("GET",g,true);this.xmlhttp.send()};e.prototype.stateChange=function(h){if(this.xmlhttp.readyState===4&&this.xmlhttp.status===200){this.xmlhttp.removeEventListener(this.READY_STATE_CHANGE,this.stateChange.bind(this));try{this.json=JSON.parse(this.xmlhttp.responseText);this.dispatch(this.successEvent)}catch(g){this.dispatch(this.failEvent)}}else{if(this.xmlhttp.readyState===4&&this.xmlhttp.status!==200){this.xmlhttp.removeEventListener(this.READY_STATE_CHANGE,this.stateChange.bind(this));this.dispatch(this.failEvent)}}};Object.defineProperty(e.prototype,"data",{get:function(){return this.json},enumerable:true,configurable:true});return e}(d.E));a.LoadJSON=c});define("com/vod/vodplayer/controller/utils/Timer",["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:true});var c=(function(){function d(f,e){this.time=null;this.counter=0;this.callback=f;this.time=e}d.prototype.start=function(){this.timer=setInterval(this.timerHandler.bind(this),this.time)};d.prototype.stop=function(){clearInterval(this.timer);this.counter=0;this.timer=null};Object.defineProperty(d.prototype,"running",{get:function(){return this.timer!==undefined},enumerable:true,configurable:true});Object.defineProperty(d.prototype,"delay",{get:function(){return this.time},enumerable:true,configurable:true});Object.defineProperty(d.prototype,"currentCount",{get:function(){return this.counter},enumerable:true,configurable:true});Object.defineProperty(d.prototype,"getTimer",{get:function(){return this.timer},enumerable:true,configurable:true});d.prototype.timerHandler=function(){this.counter++;this.callback()};return d}());a.Timer=c});define("com/vod/vodplayer/controller/utils/Utils",["require","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:true});var c=(function(){function d(){}d.isLocal=function(){return document.domain==="localhost"};d.rd=function(g,e){var f=e-g+1;return Math.floor(Math.random()*f+g)};return d}());a.Utils=c});define("com/vod/vodplayer/controller/ip/IPChecker",["require","exports","com/vod/vodplayer/E","com/vod/vodplayer/controller/utils/LoadJSON","G","com/vod/vodplayer/controller/utils/Timer","com/vod/vodplayer/controller/utils/Utils"],function(c,b,e,f,h,d,a){Object.defineProperty(b,"__esModule",{value:true});var g=(function(i){__extends(j,i);function j(){var k=i!==null&&i.apply(this,arguments)||this;k.loadJSON=new f.LoadJSON();return k}j.prototype.check=function(k){if(h.G.params[k.idHeader].iplimit==="1"){this.timer=new d.Timer(this.timeout.bind(this),1000);this.timer.start();this.loadJSON.dispatcher.addEventListener(e.E.IP_LOADED,this.checkipHandler.bind(this));this.loadJSON.dispatcher.addEventListener(e.E.IP_FAILED,this.checkipHandler.bind(this));if(a.Utils.isLocal()){this.loadJSON.load("isFromMainland",e.E.IP_LOADED,e.E.IP_FAILED)}else{this.loadJSON.load("//ipservice.163.com/isFromMainland",e.E.IP_LOADED,e.E.IP_FAILED)}}else{this.dispatch(e.E.IP_ALLOWED)}};j.prototype.checkipHandler=function(k){this.loadJSON.dispatcher.removeEventListener(e.E.IP_LOADED,this.checkipHandler.bind(this));this.loadJSON.dispatcher.removeEventListener(e.E.IP_FAILED,this.checkipHandler.bind(this));this.timer.stop();if(k.type===e.E.IP_LOADED){if(this.loadJSON.data.toString()==="true"){this.dispatch(e.E.IP_ALLOWED)}else{this.dispatch(e.E.IP_FORBIDDEN)}}else{if(k.type===e.E.IP_FAILED){this.dispatch(e.E.IP_ALLOWED)}}};j.prototype.timeout=function(){this.timer.stop();this.loadJSON.dispatcher.removeEventListener(e.E.IP_LOADED,this.checkipHandler.bind(this));this.loadJSON.dispatcher.removeEventListener(e.E.IP_FAILED,this.checkipHandler.bind(this));this.dispatch(e.E.IP_ALLOWED)};return j}(e.E));b.IPChecker=g});define("com/vod/vodplayer/controller/params/MovieInfo",["require","exports","D","G"],function(b,a,d,c){Object.defineProperty(a,"__esModule",{value:true});var e=(function(){function f(){}f.analyse=function(p,q){var j=0;var g=0;var n=[];var k=[];var h=[];try{n=p.all.flvUrl.flv;g=p.all.flvUrl.flv.length}catch(m){n=[];g=0}for(j=0;j<g;j++){k.push(n[j])}try{n=p.all.hdUrl.flv;g=p.all.hdUrl.flv.length}catch(m){n=[];g=0}for(j=0;j<g;j++){h.push(n[j])}c.G.movieInfo[q].sdArr=k;c.G.movieInfo[q].hdArr=h;if(c.G.params[q].videoSource===""){if((c.G.movieInfo[q].sdArr.length>0&&c.G.movieInfo[q].sdArr[0].indexOf("http://")>-1)||(c.G.movieInfo[q].hdArr.length>0&&c.G.movieInfo[q].hdArr[0].indexOf("http://")>-1)){if(c.G.movieInfo[q].sdArr.length>0&&!c.G.movieInfo[q].sdArr[2]){if(c.G.movieInfo[q].sdArr[0].indexOf("//flv.")>-1){c.G.movieInfo[q].sdArr.push(c.G.movieInfo[q].sdArr[0].slice(0,10)+"5"+c.G.movieInfo[q].sdArr[0].slice(10,c.G.movieInfo[q].sdArr[0].toString().length))}else{if(c.G.movieInfo[q].sdArr[0].indexOf("//flv4.")>-1){c.G.movieInfo[q].sdArr.push(c.G.movieInfo[q].sdArr[0].slice(0,10)+"5"+c.G.movieInfo[q].sdArr[0].slice(11,c.G.movieInfo[q].sdArr[0].toString().length))}}}if(c.G.movieInfo[q].hdArr.length>0&&!c.G.movieInfo[q].hdArr[2]){if(c.G.movieInfo[q].hdArr[0].indexOf("//flv.")>-1){c.G.movieInfo[q].hdArr.push(c.G.movieInfo[q].hdArr[0].slice(0,10)+"5"+c.G.movieInfo[q].hdArr[0].slice(10,c.G.movieInfo[q].hdArr[0].toString().length))}else{if(c.G.movieInfo[q].hdArr[0].indexOf("//flv4.")>-1){c.G.movieInfo[q].hdArr.push(c.G.movieInfo[q].hdArr[0].slice(0,10)+"5"+c.G.movieInfo[q].hdArr[0].slice(11,c.G.movieInfo[q].hdArr[0].toString().length))}}}}else{if(c.G.movieInfo[q].sdArr.length>0&&!c.G.movieInfo[q].sdArr[2]){if(c.G.movieInfo[q].sdArr[0].indexOf("//flv.")>-1){c.G.movieInfo[q].sdArr.push(c.G.movieInfo[q].sdArr[0].slice(0,11)+"5"+c.G.movieInfo[q].sdArr[0].slice(11,c.G.movieInfo[q].sdArr[0].toString().length))}else{if(c.G.movieInfo[q].sdArr[0].indexOf("//flv4.")>-1){c.G.movieInfo[q].sdArr.push(c.G.movieInfo[q].sdArr[0].slice(0,11)+"5"+c.G.movieInfo[q].sdArr[0].slice(12,c.G.movieInfo[q].sdArr[0].toString().length))}}}if(c.G.movieInfo[q].hdArr.length>0&&!c.G.movieInfo[q].hdArr[2]){if(c.G.movieInfo[q].hdArr[0].indexOf("//flv.")>-1){c.G.movieInfo[q].hdArr.push(c.G.movieInfo[q].hdArr[0].slice(0,11)+"5"+c.G.movieInfo[q].hdArr[0].slice(11,c.G.movieInfo[q].hdArr[0].toString().length))}else{if(c.G.movieInfo[q].hdArr[0].indexOf("//flv4.")>-1){c.G.movieInfo[q].hdArr.push(c.G.movieInfo[q].hdArr[0].slice(0,11)+"5"+c.G.movieInfo[q].hdArr[0].slice(12,c.G.movieInfo[q].hdArr[0].toString().length))}}}}}d.D.d("流畅: "+k);d.D.d("高清: "+h);if(c.G.params[q].vr==="1"){c.G.movieInfo[q].vtype=1}else{var l;var o="";try{if(c.G.params[q].videoSource&&c.G.params[q].videoSource!==""){l=c.G.params[q].videoSource.split("?")[0].split(".")}else{l=c.G.movieInfo[q].sdArr[0].split("?")[0].split(".")}o=l[l.length-1].toLowerCase()}catch(m){d.D.w("MovieInfo, "+m)}if(o==="m3u8"){c.G.movieInfo[q].vtype=2}else{if(o==="flv"){c.G.movieInfo[q].vtype=3}else{c.G.movieInfo[q].vtype=0}}}try{c.G.movieInfo[q].title=decodeURIComponent(p.all.title)}catch(m){c.G.movieInfo[q].title=""}d.D.d(c.G.movieInfo[q].title);try{c.G.movieInfo[q].duration=p.all.totaltime}catch(m){c.G.movieInfo[q].duration=0}d.D.d("G.movieInfo[idHeader].duration: "+c.G.movieInfo[q].duration);try{c.G.movieInfo[q].pageUrl=p.all.pageUrl}catch(m){c.G.movieInfo[q].pageUrl=0}d.D.d(c.G.movieInfo[q].pageUrl)};return f}());a.MovieInfo=e});define("com/vod/vodplayer/controller/stat/Stat",["require","exports","G"],function(c,b,d){Object.defineProperty(b,"__esModule",{value:true});var a=(function(){function e(f){this.statUrl="http://yourstatdomain/htdata/";this.channel="vodplayer";this.uuid=this.generateUuid();this.model=f}e.prototype.buffer=function(f,g){this.statData({act:1,ontime:Math.floor(f),qt:g})};e.prototype.heartbeat=function(f,g){this.statData({act:0,ontime:Math.floor(f),qt:g})};e.prototype.videoFailed=function(f,g){this.statData({failtype:0,failurl:f,qt:g})};e.prototype.playStart=function(h,f,g){this.statData({bftime:f,qt:g,successtype:0,successurl:h})};e.prototype.playComplete=function(f){this.statData({act:4,qt:f})};e.prototype.statData=function(f){f.uuid=this.uuid;f.channel=this.channel;f.vid=d.G.params[this.model.idHeader].vid||"";f.sid=d.G.params[this.model.idHeader].sid||"";f.pltype=d.G.params[this.model.idHeader].pltype||"";f.topicid=d.G.params[this.model.idHeader].topicid||"";f.qt=f.qt?f.qt:"";f.r=(new Date()).getTime();if(d.G.params[this.model.idHeader].stat==="1"){this.send(f)}};e.prototype.send=function(g){if(this.img===undefined){this.img=document.createElement("img");this.img.style.display="none";document.body.appendChild(this.img)}var h="";for(var f in g){if(g.hasOwnProperty(f)){h+=(h==="")?"?":"&";h+=f+"="+g[f]}}this.img.src=this.statUrl+h};e.prototype.generateUuid=function(){var g;var h;var k="";var f="";for(var j=0;j<6;j++){g=Math.random();h=Math.round(g*1000);if(h%2===0){k=String.fromCharCode(48+(h%10))}else{k=String.fromCharCode(65+(h%26))}f+=k}return(new Date()).getTime()+f};return e}());b.Stat=a});define("com/vod/vodplayer/controller/Stream",["require","exports","com/vod/vodplayer/E","D","G","com/vod/vodplayer/controller/utils/Timer","com/vod/vodplayer/controller/stat/Stat"],function(c,b,e,h,f,d,a){Object.defineProperty(b,"__esModule",{value:true});var g=(function(i){__extends(j,i);function j(l,k,o){var n=i.call(this)||this;n.history=0;n.firstMetadata=true;n.firstPlay=true;n.isLoading=false;n.loadingCount=0;n.prevTime=0;n.reConnTime=1;n.reConnCounter=0;n.startLoadTime=0;n.rate=1;n.bf=-1;n.lastHistoryTime=0;n.defaultPauseAlready=false;n.model=k;n.controller=o;n.video=l;n.stat=new a.Stat(n.model);n.video.addEventListener(e.E.LOAD_START,n.status.bind(n));n.video.addEventListener(e.E.ERROR,n.status.bind(n));n.video.addEventListener(e.E.LOADED_METADATA,n.status.bind(n));n.video.addEventListener(e.E.DURATION_CHANGE,n.status.bind(n));n.video.addEventListener(e.E.LOADED_DATA,n.status.bind(n));n.video.addEventListener(e.E.PROGRESS,n.status.bind(n));n.video.addEventListener(e.E.CAN_PLAY,n.status.bind(n));n.video.addEventListener(e.E.CAN_PLAY_THROUGH,n.status.bind(n));n.video.addEventListener(e.E.TIME_UPDATE,n.status.bind(n));n.video.addEventListener(e.E.PLAY,n.status.bind(n));n.video.addEventListener(e.E.PLAYING,n.status.bind(n));n.video.addEventListener(e.E.PAUSE,n.status.bind(n));n.video.addEventListener(e.E.ENDED,n.status.bind(n));n.video.addEventListener(e.E.EMPTIED,n.status.bind(n));n.video.addEventListener(e.E.SEEKING,n.status.bind(n));n.video.addEventListener(e.E.SEEKED,n.status.bind(n));n.video.addEventListener(e.E.WAITING,n.status.bind(n));n.video.addEventListener(e.E.VOLUME_CHANGE,n.status.bind(n));n.model.dispatcher.addEventListener(e.E.VOLUME_CHANGE,n.volumeChanged.bind(n));n.model.dispatcher.addEventListener(e.E.PLAYBACKRATE,n.rateHandler.bind(n));n.model.dispatcher.addEventListener(e.E.DISPOSE,n.disposeHandler.bind(n));n.timer=new d.Timer(n.timerHandler.bind(n),500);return n}j.prototype.setSource=function(k){h.D.d("Stream.setSource, src = "+k);if(!this.timer.running){this.timer.start()}if(this.video.src===k){return}this.firstPlay=true;this.startLoadTime=(new Date()).getTime();if(this.model.vType===2){h.D.d("HLS赋值新地址");this.model.hlsSrc=k}if(this.model.vType===3){h.D.d("flv赋值新地址");this.model.flvSrc=k}else{this.video.src=k}if(this.model.playing){this.play()}};j.prototype.play=function(){this.model.loading=true;this.isLoading=true;this.model.playComplete=0;this.model.playing=true;this.model.issue=-1;this.model.removeCover=true;if(!this.timer.running){this.timer.start()}h.D.d("video.play()");this.promise=this.video.play();if(this.promise!==undefined){this.promise.then(this.playResolve,this.playReject.bind(this))}};j.prototype.pause=function(){this.model.loading=false;this.model.playing=false;this.video.pause()};j.prototype.seek=function(l){var m=Math.floor(l*this.video.duration);try{h.D.d("Stream.seek: "+m);this.video.currentTime=m}catch(k){h.D.e("Stream.seek, "+k+" // "+l*this.video.duration);return}this.model.seeked=false;if(!this.firstPlay){this.model.loading=true}this.isLoading=true;h.D.d("跳转存历史, time="+m);this.controller.storage(m)};Object.defineProperty(j.prototype,"time",{get:function(){return this.video.currentTime},enumerable:true,configurable:true});Object.defineProperty(j.prototype,"duration",{get:function(){return this.video.duration},enumerable:true,configurable:true});j.prototype.status=function(k){if(k.type===e.E.CAN_PLAY){this.model.loading=false}else{if(k.type===e.E.CAN_PLAY_THROUGH){this.model.loading=false;if(this.bf<0){this.bf=(new Date()).getTime()-this.startLoadTime;h.D.d("视频加载时间: this.bf="+this.bf+" ms")}}else{if(k.type===e.E.PLAY){if(this.firstPlay){this.stat.playStart(this.video.src,this.bf,this.model.quality);this.firstPlay=false}}else{if(k.type===e.E.LOADED_METADATA){if((f.G.params[this.model.idHeader].autoplay==="true"||f.G.params[this.model.idHeader].autoplay===true)){h.D.d("LOADED_METADATA, this.history="+this.history);this.video.currentTime=this.history}this.video.currentTime=this.history;f.G.movieInfo[this.model.idHeader].duration=this.video.duration;h.D.d("metadata duration: "+f.G.movieInfo[this.model.idHeader].duration)}else{if(k.type===e.E.PROGRESS){this.progressHandler()}else{if(k.type===e.E.TIME_UPDATE){this.timeupdateHandler()}else{if(k.type===e.E.SEEKED){h.D.d("SEEKED, currentTime="+this.video.currentTime+", starttime="+f.G.params[this.model.idHeader].starttime);this.model.seeked=true;this.model.loading=false}else{if(k.type===e.E.SEEKING){}else{if(k.type===e.E.VOLUME_CHANGE){}else{if(k.type===e.E.PLAYING){this.model.loading=false;this.video.playbackRate=this.rate}else{if(k.type===e.E.PAUSE){}else{if(k.type===e.E.WAITING){this.model.loading=true}else{if(k.type===e.E.ERROR){if(this.reConnCounter++<this.reConnTime){if(this.model.quality==="sd"){this.setSource(f.G.bURL.sd)}else{if(this.model.quality==="hd"){this.setSource(f.G.bURL.hd)}}}else{this.stat.videoFailed(this.video.src,this.model.quality);this.model.issue=2}}else{if(k.type===e.E.ENDED){this.stat.playComplete(this.model.quality);if(this.timer.running){this.timer.stop()}this.history=0;this.controller.playComplete()}else{if(k.type===e.E.DURATION_CHANGE){if(this.heartbeatTimer&&this.heartbeatTimer.running){this.heartbeatTimer.stop();this.heartbeatTimer=null}var l=Math.floor(this.video.duration*0.05);if(l<1){l=1}else{if(l>180){l=180}}h.D.d("心跳间隔"+l+"秒");l=l*1000;this.heartbeatTimer=new d.Timer(this.heartbeatHandler.bind(this),l);this.heartbeatTimer.start();this.model.duration=this.duration}}}}}}}}}}}}}}}};j.prototype.playResolve=function(k){h.D.d("play resolve, "+k)};j.prototype.playReject=function(k){h.D.consolelog("play reject, "+k);if(String(k).indexOf("NotSupportedError")>-1){this.model.issue=6}else{if(String(k).indexOf("AbortError")>-1){}else{this.model.issue=2}}};j.prototype.heartbeatHandler=function(){this.stat.heartbeat(this.time,this.model.quality)};j.prototype.timerHandler=function(){if(this.video.paused){return}if(isNaN(this.video.currentTime)){h.D.d("video.currentTime is NaN");this.model.loading=true;this.isLoading=true;return}if(this.isLoading){this.loadingCount++;var n=0;if(this.model.vType===2){n=200}else{n=20}if(this.loadingCount===n){this.pause();h.D.d("重新播放");this.play()}else{if(this.loadingCount===n*2){this.pause();this.timer.stop();this.loadingCount=0;this.model.issue=3;h.D.d("超时");return}}}else{this.loadingCount=0}if(this.prevTime===this.video.currentTime&&this.video.currentTime!==0){if(this.isLoading){return}this.isLoading=true;this.model.loading=true;this.stat.buffer(this.time,this.model.quality)}else{if(this.prevTime!==this.video.currentTime&&this.video.currentTime>0){if(this.isLoading){this.model.loading=false;this.isLoading=false}}}this.prevTime=this.video.currentTime;var l=Math.floor((new Date()).getTime()/1000);if((l-this.lastHistoryTime>2)&&l%5===0&&this.video.duration>600){var k=(this.video.currentTime>(this.video.duration-5));this.controller.storage(Math.floor(this.time),k);this.lastHistoryTime=l}if(!this.defaultPauseAlready){var m=f.G.params[this.model.idHeader].autoplay;if((m==="false"||m===false)&&f.G.params[this.model.idHeader].endtime!=="0"&&(this.time>=Number(f.G.params[this.model.idHeader].endtime))){this.controller.toggle(false);this.defaultPauseAlready=true}}};j.prototype.progressHandler=function(){var n=[];var m=0;var o=0;var p=0;var k=0;for(var l=0;l<this.video.buffered.length;l++){p=this.video.buffered.start(l);k=this.video.buffered.end(l);o=p/this.video.duration;m=(k-p)/this.video.duration;n.push({end:k,left:o,width:m})}if(n.length>=1){this.model.progress=n[n.length-1].end/this.duration}};j.prototype.timeupdateHandler=function(){var k=this.video.currentTime/this.video.duration;this.model.timeupdate=k};j.prototype.volumeChanged=function(l){if(this.model.volume>0){this.video.muted=false}if(this.model.volume>1){this.video.volume=1}else{try{this.video.volume=this.model.volume}catch(k){h.D.d(k+", this.model.volume="+this.model.volume)}}};j.prototype.rateHandler=function(k){this.playRate(this.model.playbackRate)};j.prototype.playRate=function(k){this.rate=k;if(!this.video.paused){this.video.playbackRate=k}};j.prototype.disposeHandler=function(k){if(this.model.dispose){if(this.timer.running){h.D.d("Stream dispose");this.timer.stop()}}};return j}(e.E));b.Stream=g});define("com/vod/vodplayer/controller/store/Store",["require","exports","D"],function(b,a,c){Object.defineProperty(a,"__esModule",{value:true});var d=(function(){function e(){this.enabled=true;this.historyArr=[];this.historyMax=100;this.HISTORY="vod_history";this.QUALITY="vod_quality";this.VOLUME="vod_volume";try{this.storage=localStorage}catch(f){c.D.d(f);this.enabled=false;return}if(!this.storage.hasOwnProperty(this.HISTORY)){this.historyArr=[]}else{var g=this.storage[this.HISTORY];this.historyArr=g.split("&")}if(!this.storage.hasOwnProperty(this.QUALITY)){this.storage[this.QUALITY]="sd"}if(!this.storage.hasOwnProperty(this.VOLUME)){this.storage[this.VOLUME]=1}}e.prototype.saveHistory=function(j){var h=0;var l=j.vid;var n=j.sid;for(h=0;h<l.length;h++){if(l.substr(h,1)==="&"){l=l.substr(0,h)+"$"+l.substr(h+1,l.length)}}for(h=0;h<n.length;h++){if(n.substr(h,1)==="&"){n=n.substr(0,h)+"$"+n.substr(h+1,n.length)}}j.vid=l;j.sid=n;var g="";try{g=JSON.stringify(j)}catch(f){c.D.d("播放历史格式错误");return}for(h=0;h<this.historyArr.length;h++){var k="";try{k=JSON.parse(this.historyArr[h]).vid}catch(f){c.D.e(f+" //// "+this.historyArr[h])}if(j.vid===k&&j.sid===JSON.parse(this.historyArr[h]).sid){this.historyArr.splice(h,1);break}}if(this.historyArr.length>=this.historyMax){this.historyArr.pop()}this.historyArr.unshift(g);var m="";for(h=0;h<this.historyArr.length;h++){m+=this.historyArr[h]+"&"}m=m.slice(0,m.length-1);this.storage[this.HISTORY]=m};e.prototype.saveQuality=function(f){this.storage[this.QUALITY]=f};e.prototype.saveVolume=function(f){this.storage[this.VOLUME]=f};e.prototype.getTime=function(g,f){if(!this.storage.hasOwnProperty(this.HISTORY)){this.historyArr=[]}else{var l=this.storage[this.HISTORY];this.historyArr=l.split("&")}var k;for(var j=0;j<this.historyArr.length;j++){try{k=JSON.parse(this.historyArr[j])}catch(h){continue}if(k.sid===g&&k.vid===f){if(!isNaN(k.time)){return k.time}else{c.D.d("json.time is NaN");return 0}}}return 0};e.prototype.getVolume=function(){return Number(this.storage[this.VOLUME])};e.prototype.getQuality=function(){return this.storage[this.QUALITY]};return e}());a.Store=d});define("com/vod/vodplayer/controller/Controller",["require","exports","com/vod/vodplayer/controller/params/CDN","D","com/vod/vodplayer/E","G","com/vod/vodplayer/controller/ip/IPChecker","com/vod/vodplayer/controller/utils/LoadJSON","com/vod/vodplayer/controller/params/MovieInfo","com/vod/vodplayer/controller/Stream","com/vod/vodplayer/controller/store/Store","com/vod/vodplayer/controller/utils/Utils","com/vod/vodplayer/controller/utils/Timer"],function(e,i,d,h,l,a,c,k,m,g,n,b,j){Object.defineProperty(i,"__esModule",{value:true});var f=(function(){function o(p){this.loadJSON=new k.LoadJSON();this.ipChecker=new c.IPChecker();this.info={};this._playbackRateDefault="";this.model=p}o.prototype.toggle=function(p){if(p){this.playVideo()}else{this.pauseVideo()}};o.prototype.seek=function(p){this.seekVideo(p)};o.prototype.storage=function(q,p){if(p===void 0){p=false}h.D.d("存播放历史, time="+q);this.store.saveHistory({complete:p,sid:a.G.params[this.model.idHeader].sid,time:Math.floor(q),vid:a.G.params[this.model.idHeader].vid})};o.prototype.volume=function(q){var p=Math.floor(q*10)/10;h.D.d("controller, volume = "+p+", pct="+q);this.model.volume=p;this.store.saveVolume(p)};o.prototype.changeVideoScale=function(p){this.model.scale=p};o.prototype.changeVideoQuality=function(p){h.D.d("改变清晰度存历史, this.stream.time="+this.stream.time);this.storage(this.stream.time);this.model.quality=p;this.store.saveQuality(p);this.model.snapshot=true;this.setVideoSource()};o.prototype.clickDocument=function(p){this.model.clickDoc=p};o.prototype.playComplete=function(){this.storage(0,true);this.model.playComplete=1;if(a.G.params[this.model.idHeader].loop==="1"){this.playVideo()}};o.prototype.playbackRate=function(p){this.model.playbackRate=p};o.prototype.init=function(){this.video=this.model.u.e("vodVideo");this.stream=new g.Stream(this.video,this.model,this);this.store=new n.Store();this.stream.history=this.store.getTime(a.G.params[this.model.idHeader].sid,a.G.params[this.model.idHeader].vid);if(a.G.params[this.model.idHeader].muted==="1"){this.volume(0)}else{h.D.d("this.store.getVolume() = "+this.store.getVolume());this.model.volume=this.store.getVolume()}this.model.quality=this.store.getQuality();h.D.d("播放历史: "+this.stream.history);this.movieInfo();if(this.playbackRateDefault!==""){this.playbackRate(Number(this.playbackRateDefault))}};o.prototype.checkip=function(){this.ipChecker.dispatcher.addEventListener(l.E.IP_ALLOWED,this.checkipHandler.bind(this));this.ipChecker.dispatcher.addEventListener(l.E.IP_FORBIDDEN,this.checkipHandler.bind(this));this.ipChecker.check(this.model)};o.prototype.checkipHandler=function(p){this.ipChecker.dispatcher.removeEventListener(l.E.IP_ALLOWED,this.checkipHandler.bind(this));this.ipChecker.dispatcher.removeEventListener(l.E.IP_FORBIDDEN,this.checkipHandler.bind(this));if(p.type===l.E.IP_ALLOWED){this.movieInfo()}else{if(p.type===l.E.IP_FORBIDDEN){this.model.issue=1}}};o.prototype.movieInfo=function(){if(a.G.params[this.model.idHeader].videoSource!==""){h.D.d("videoSource = "+a.G.params[this.model.idHeader].videoSource);this.loadJSON.setVideoJSON(a.G.params[this.model.idHeader].videoSource);this.movieInfoHandler()}else{this.model.issue=5}};o.prototype.movieInfoHandler=function(p){if(p===undefined||p.type===l.E.MOVIEINFO_LOADED){this.info=this.loadJSON.data;m.MovieInfo.analyse(this.info,this.model.idHeader);if(a.G.movieInfo[this.model.idHeader].sdArr.length===0){this.model.noThisQuality="sd";this.model.quality="hd";this.store.saveQuality("hd")}else{if(a.G.movieInfo[this.model.idHeader].hdArr.length===0){this.model.noThisQuality="hd";this.model.quality="sd";this.store.saveQuality("sd")}}this.vtype();this.cdn();this.setVideoSource();this.checkAuto()}else{if(p.type===l.E.MOVIEINFO_FAILED){this.model.issue=0}}};o.prototype.setVideoSource=function(){if(this.model.quality==="sd"){this.stream.setSource(a.G.mURL.sd)}else{if(this.model.quality==="hd"){this.stream.setSource(a.G.mURL.hd)}}this.stream.history=this.store.getTime(a.G.params[this.model.idHeader].sid,a.G.params[this.model.idHeader].vid)};o.prototype.vtype=function(){this.model.vType=Number(a.G.movieInfo[this.model.idHeader].vtype)};o.prototype.cdn=function(){d.CDN.cdn(this.model)};o.prototype.checkAuto=function(){if(a.G.params[this.model.idHeader].autoplay==="true"||a.G.params[this.model.idHeader].autoplay===true){this.adComplete()}else{h.D.d("封面图");this.model.coverURL=a.G.params[this.model.idHeader].coverpic;this.setStartTimePointTemp=this.setStartTimePoint.bind(this);this.model.dispatcher.addEventListener(l.E.DURATION_CHANGE,this.setStartTimePointTemp)}};o.prototype.setStartTimePoint=function(r){this.model.dispatcher.removeEventListener(l.E.DURATION_CHANGE,this.setStartTimePointTemp);this.setStartTimePointTemp=null;var s=a.G.params[this.model.idHeader].starttime;var q=a.G.params[this.model.idHeader].autoplay;if((q==="false"||q===false)&&s!==""){var p=b.Utils.rd(1,2);var t=new j.Timer(function(){t.stop();t=null;h.D.d("跳转至默认开始时间, starttime="+a.G.params[this.model.idHeader].starttime+", rd="+p);this.seekVideo(Number(s)/this.model.duration)}.bind(this),p);t.start()}};o.prototype.adPlay=function(){};o.prototype.adStart=function(){this.loadVideo()};o.prototype.adComplete=function(){if(this.model.vType===2){this.tempHLSParsed=this.hlsParsed.bind(this);this.model.dispatcher.addEventListener(l.E.HLS_MANIFEST_PARSED,this.tempHLSParsed)}else{this.playVideo()}};o.prototype.hlsParsed=function(p){this.model.dispatcher.removeEventListener(l.E.HLS_MANIFEST_PARSED,this.tempHLSParsed);this.tempHLSParsed=null;this.playVideo()};o.prototype.loadVideo=function(){this.video.load()};o.prototype.playVideo=function(){this.stream.play()};o.prototype.pauseVideo=function(){this.stream.pause()};o.prototype.seekVideo=function(p){this.stream.seek(p)};Object.defineProperty(o.prototype,"playbackRateDefault",{get:function(){return this._playbackRateDefault},set:function(p){this._playbackRateDefault=p},enumerable:true,configurable:true});return o}());i.Controller=f});define("com/vod/vodplayer/view/ProgressBar",["require","exports","D","G","com/vod/vodplayer/E"],function(d,c,f,e,b){Object.defineProperty(c,"__esModule",{value:true});var a=(function(){function g(h,i){this.clickListenerRemoved=false;this.focusArr=[];this.model=h;this.controller=i;this.init()}g.prototype.resize=function(){this.barWidth=e.G.stageWidth[this.model.idHeader].stageWidth-20;this.model.u.width("vodProgressBar",this.barWidth);this.model.u.width("vodLoadingBar",this.barWidth*this.model.progress);this.model.u.width("vodPlayingBar",this.barWidth*this.model.timeupdate);this.model.u.x("vodSlider",this.barWidth*this.model.timeupdate-8);this.focus()};g.prototype.init=function(){this.tempTimeupdateHandler=this.timeupdate.bind(this);this.model.dispatcher.addEventListener(b.E.TIME_UPDATE,this.tempTimeupdateHandler);this.tempBarsHandler=this.mouseHandler.bind(this);this.model.u.e("vodProgressBar").addEventListener("mouseenter",this.tempBarsHandler);this.model.u.e("vodProgressBar").addEventListener("mouseleave",this.tempBarsHandler);this.tempMouseHandler=this.mouseHandler.bind(this);this.model.u.e("vodProgressBar").addEventListener("click",this.tempMouseHandler);this.model.u.e("vodSlider").addEventListener("mousedown",this.sliderHandler.bind(this));this.model.dispatcher.addEventListener(b.E.PROGRESS,this.progress.bind(this));this.model.dispatcher.addEventListener(b.E.SEEKED,this.seekedHandler.bind(this));this.tempDurationHandler=this.durationHandler.bind(this);this.model.dispatcher.addEventListener(b.E.DURATION_CHANGE,this.tempDurationHandler)};g.prototype.durationHandler=function(h){this.model.dispatcher.removeEventListener(b.E.DURATION_CHANGE,this.tempDurationHandler);this.focus()};g.prototype.focus=function(){this.focusPanel=this.model.u.e("vodFocusPanel");this.model.u.display(this.focusPanel,"none");this.focusContainer=this.model.u.e("vodFocusBarContainer");if(e.G.params[this.model.idHeader].focusJson.length===0){return}try{this.focusArr=JSON.parse(e.G.params[this.model.idHeader].focusJson)}catch(k){f.D.e("focusJson, "+k);return}var m=[];var p=Math.floor(this.model.duration);if(p===0){return}for(var l=0;l<this.focusArr.length;l++){var o={};o.start=Number(this.focusArr[l].startPoint);o.end=Number(this.focusArr[l].endPoint);if(o.start>p){break}else{if(o.end>p){o.end=p}}o.width=((o.end-o.start)/p)*this.barWidth;if(o.width<4){o.width=4}o.startPCT=o.start/p;o.cutImage=this.focusArr[l].cutImage;o.title=this.focusArr[l].title;o.id=this.focusArr[l].id;m.push(o)}this.focusContainer.innerHTML="";for(var h=0;h<m.length;h++){var n=document.createElement("div");n.dataset.id=m[h].id;n.dataset.title=m[h].title;n.dataset.cutimage=m[h].cutImage;n.dataset.start=m[h].start;this.model.u.width(n,m[h].width);this.model.u.x(n,m[h].startPCT*this.barWidth);this.focusContainer.appendChild(n);n.onmouseover=this.mover.bind(this);n.onmouseout=this.mout.bind(this);n.onclick=this.mclick.bind(this)}};g.prototype.timeupdate=function(h){this.model.u.width("vodPlayingBar",(e.G.stageWidth[this.model.idHeader].stageWidth-20)*this.model.timeupdate);this.model.u.x("vodSlider",(e.G.stageWidth[this.model.idHeader].stageWidth-20)*this.model.timeupdate-8)};g.prototype.progress=function(h){this.model.u.width("vodLoadingBar",Math.floor(this.model.progress*(e.G.stageWidth[this.model.idHeader].stageWidth-20)))};g.prototype.mouseHandler=function(h){if(h.type==="mouseenter"){this.model.u.e("vodBars").className="vodBars vodBarsHover";this.model.u.e("vodSlider").className="vodSlider vodSliderShow"}else{if(h.type==="mouseleave"){this.model.u.e("vodBars").className="vodBars";this.model.u.e("vodSlider").className="vodSlider"}else{if(h.type==="click"){var i=h.offsetX/this.barWidth;this.controller.seek(i)}}}};g.prototype.sliderHandler=function(j){if(j.type==="mousedown"){try{window.getSelection().removeAllRanges()}catch(i){f.D.e("ProgressBar slider, "+i)}document.body.onselectstart=this.selectHandler.bind(this);this.model.dispatcher.removeEventListener(b.E.TIME_UPDATE,this.tempTimeupdateHandler);this.model.u.e("vodProgressBar").removeEventListener("click",this.tempMouseHandler);this.clickListenerRemoved=true;this.tempSliderHandler=this.sliderHandler.bind(this);window.document.addEventListener("mouseup",this.tempSliderHandler);window.document.addEventListener("mousemove",this.tempSliderHandler);this.oldX=j.layerX||j.offsetX;this.oldY=j.layerY||j.offsetY}else{if(j.type==="mouseup"){document.body.onselectstart=null;window.document.removeEventListener("mouseup",this.tempSliderHandler);window.document.removeEventListener("mousemove",this.tempSliderHandler);this.model.dispatcher.addEventListener(b.E.TIME_UPDATE,this.tempTimeupdateHandler);var k=Number(this.model.u.e("vodPlayingBar").style.width.split("px")[0])/this.barWidth;this.controller.seek(k)}else{if(j.type==="mousemove"){if(j.target!==this.model.u.e("vodSlider")){var h=j.offsetX;if(h<0){h=0}else{if(h>this.barWidth){h=this.barWidth}}this.model.u.width("vodPlayingBar",h);this.model.u.e("vodSlider").style.left=(h-8)+"px"}}}}};g.prototype.seekedHandler=function(h){if(this.clickListenerRemoved&&this.model.seeked){this.model.u.e("vodProgressBar").addEventListener("click",this.tempMouseHandler);this.clickListenerRemoved=false}};g.prototype.mover=function(i){var l=i.currentTarget;var n=90;var r=40;var h=190;var q=n+r;this.focusPanel.innerHTML="";this.model.u.display(this.focusPanel,"block");this.model.u.x(this.focusPanel,this.model.u.getX(l)-Math.floor((h-this.model.u.getWidth(l))/2)+10);if(this.model.u.getX(this.focusPanel)<0){this.model.u.x(this.focusPanel,0)}else{if(this.model.u.getX(this.focusPanel)>(e.G.stageWidth[this.model.idHeader].stageWidth-this.model.u.getWidth(this.focusPanel))){this.model.u.x(this.focusPanel,e.G.stageWidth[this.model.idHeader].stageWidth-this.model.u.getWidth(this.focusPanel))}}if(l.dataset.cutimage.length>0){this.model.u.height(this.focusPanel,q);this.model.u.y(this.focusPanel,e.G.stageHeight[this.model.idHeader].stageHeight-185)}else{this.model.u.height(this.focusPanel,r);this.model.u.y(this.focusPanel,e.G.stageHeight[this.model.idHeader].stageHeight-95)}var k=l.dataset.cutimage;if(k.length>0){var j=document.createElement("div");this.model.u.height(j,n);var m=document.createElement("img");m.src=k;m.width=h;m.height=n;j.appendChild(m);this.focusPanel.appendChild(j)}var u=l.dataset.title;u=u.slice(0,22);var s=this.model.u.formatTime(l.dataset.start);if(u.length>0){var o=document.createElement("div");this.model.u.height(o,r);o.style.paddingRight="2px";o.style.paddingLeft="2px";if(u.length<10){o.style.lineHeight=r+"px"}o.innerHTML=s+" "+u;this.focusPanel.appendChild(o)}};g.prototype.mout=function(h){this.model.u.display(this.focusPanel,"none")};g.prototype.mclick=function(i){var h=i.currentTarget;var j=(this.model.u.getX(h)+i.offsetX)/this.barWidth;this.controller.seek(j);i.stopPropagation()};g.prototype.selectHandler=function(h){return false};return g}());c.ProgressBar=a});define("com/vod/vodplayer/view/Volume",["require","exports","com/vod/vodplayer/E","G"],function(d,b,a,c){Object.defineProperty(b,"__esModule",{value:true});var e=(function(){function f(g,h){this.preVolume=0;this.oldWidth=0;this.model=g;this.controller=h;this.init()}f.prototype.init=function(){this.volumeBtn=this.model.u.e("vodVolumeBtn");this.barWidth=this.model.u.e("vodVolumeBar").clientWidth;this.sliderWidth=this.model.u.e("vodVolumeSlider").clientWidth;this.model.u.e("vodVolumeBtnContainer").addEventListener("mouseenter",this.mouseEnterHandler.bind(this));this.model.u.e("vodVolumeBtnContainer").addEventListener("mouseleave",this.mouseLeaveHandler.bind(this));this.model.u.e("vodVolumeBar").addEventListener("mouseenter",this.mouseEnterHandler.bind(this));this.model.u.e("vodVolumeBar").addEventListener("mouseleave",this.mouseLeaveHandler.bind(this));this.model.dispatcher.addEventListener(a.E.TIME_UPDATE,this.timeupdate.bind(this));this.volumeBtn.addEventListener("click",this.btnHandler.bind(this));this.model.dispatcher.addEventListener(a.E.VOLUME_CHANGE,this.volumeChanged.bind(this));this.tempMouseHandler=this.clickHandler.bind(this);this.model.u.e("vodVolumeBars").addEventListener("click",this.tempMouseHandler);this.model.u.e("vodVolumeSlider").addEventListener("mousedown",this.sliderHandler.bind(this));this.hideBar()};f.prototype.volumeChanged=function(g){this.volume=this.model.volume;this.btnStyle()};f.prototype.btnHandler=function(g){if(this.volume!==0){this.preVolume=this.volume;this.volume=0}else{if(isNaN(this.preVolume)){return}else{this.volume=this.preVolume}}this.model.u.width("vodVolumeMoving",this.barWidth*this.volume);var h=this.barWidth*this.volume-Math.ceil(this.sliderWidth/2);if(h<0){h=0}this.model.u.e("vodVolumeSlider").style.left=h+"px";this.controller.volume(this.volume)};f.prototype.btnStyle=function(){if(this.volume===0){this.model.u.e("vodVolumeBtn").className="vodVolumeBtnMuted"}else{if(this.volume<0.5){this.model.u.e("vodVolumeBtn").className="vodVolumeBtnHalf"}else{this.model.u.e("vodVolumeBtn").className="vodVolumeBtnFull"}}this.model.u.width("vodVolumeMoving",this.barWidth*this.volume);var g=this.barWidth*this.volume;if(g<0){g=0}if(g>this.barWidth-this.sliderWidth){g=this.barWidth-this.sliderWidth}this.model.u.e("vodVolumeSlider").style.left=g+"px"};f.prototype.clickHandler=function(g){var h=g.offsetX/this.barWidth;this.controller.volume(h);this.model.u.width("vodVolumeMoving",this.barWidth*h);var i=this.barWidth*this.volume-Math.ceil(this.sliderWidth/2);if(i<0){i=0}this.model.u.e("vodVolumeSlider").style.left=i+"px"};f.prototype.sliderHandler=function(k){if(k.type==="mousedown"){document.body.onselectstart=this.selectHandler.bind(this);this.model.u.e("vodVolumeBar").removeEventListener("click",this.tempMouseHandler);this.tempSliderHandler=this.sliderHandler.bind(this);window.document.addEventListener("mouseup",this.tempSliderHandler);window.document.addEventListener("mousemove",this.tempSliderHandler);this.oldX=k.pageX||k.layerX||k.offsetX;this.oldWidth=this.model.u.e("vodVolumeMoving").clientWidth}else{if(k.type==="mouseup"){document.body.onselectstart=null;window.document.removeEventListener("mouseup",this.tempSliderHandler);window.document.removeEventListener("mousemove",this.tempSliderHandler);this.model.u.e("vodVolumeBars").addEventListener("click",this.tempMouseHandler);var l=Math.ceil(this.model.u.e("vodVolumeMoving").clientWidth/(this.barWidth-this.sliderWidth)*10)/10;this.controller.volume(l)}else{if(k.type==="mousemove"){var j=void 0;if(k.pageX==null&&k.clientX!=null){var m=document.documentElement;var g=document.body;j=k.clientX+(m&&m.scrollLeft||g&&g.scrollLeft||0)-(m&&m.clientLeft||g&&g.clientLeft||0)}else{j=k.pageX}var i=j-this.oldX;var h=this.oldWidth+i;if(h>this.barWidth-this.sliderWidth){h=this.barWidth-this.sliderWidth}if(h<0){h=0}this.model.u.width("vodVolumeMoving",h);this.model.u.e("vodVolumeSlider").style.left=(h)+"px"}}}};f.prototype.selectHandler=function(g){return false};f.prototype.timeupdate=function(i){var g=this.model.u.formatTime(this.model.timeupdate*c.G.movieInfo[this.model.idHeader].duration);var h=this.model.u.formatTime(c.G.movieInfo[this.model.idHeader].duration);this.model.u.e("vodTime").innerHTML=g+" / "+h};f.prototype.mouseLeaveHandler=function(g){this.hideBar()};f.prototype.mouseEnterHandler=function(g){this.showBar()};f.prototype.hideBar=function(){this.model.u.e("vodVolumeSlider").style.display="none";this.model.u.e("vodVolumeBars").style.display="none";this.model.u.e("vodTime").style.left="0px"};f.prototype.showBar=function(){this.model.u.e("vodVolumeSlider").style.display="block";this.model.u.e("vodVolumeBars").style.display="block";this.model.u.e("vodTime").style.left="60px"};return f}());b.Volume=e});define("com/vod/vodplayer/view/Trigger",["require","exports","D","com/vod/vodplayer/E","G"],function(e,d,f,a,c){Object.defineProperty(d,"__esModule",{value:true});var b=(function(){function g(h,i){this.model=h;this.controller=i;this.toggleBtn=this.model.u.e("vodToggle");this.init()}g.prototype.init=function(){this.toggleBtn.addEventListener("click",this.clickHandler.bind(this));var h=this.model.u.e("vodVideoContainer");h.addEventListener("click",this.clickScreen.bind(this));this.model.dispatcher.addEventListener(a.E.PLAY_ING,this.playingHandler.bind(this));this.model.dispatcher.addEventListener(a.E.PLAY_COMPLETE,this.playComplete.bind(this));this.model.dispatcher.addEventListener(a.E.STH_WRONG,this.sthWrong.bind(this));this.model.dispatcher.addEventListener(a.E.DISPOSE,this.disposeHandler.bind(this))};g.prototype.clickScreen=function(h){this.toggleBtn.dispatchEvent(new MouseEvent("click"))};g.prototype.clickHandler=function(i){var h=i.target;if(h.className==="vodPlayBtn"){this.controller.toggle(true)}else{if(h.className==="vodPauseBtn"){this.controller.toggle(false)}}};g.prototype.pauseStyle=function(){this.toggleBtn.className="vodPlayBtn";this.model.u.css("vodToggleContainer","vodPlayBtn")};g.prototype.playingHandler=function(h){f.D.d("Trigger, playing: "+this.model.playing);if(this.model.playing){this.toggleBtn.className="vodPauseBtn";this.model.u.css("vodToggleContainer","vodPauseBtn")}else{this.pauseStyle()}};g.prototype.playComplete=function(h){if(this.model.playComplete===1){this.pauseStyle()}};g.prototype.sthWrong=function(h){if(this.model.issue>0){f.D.d("Trigger, sth wrong");this.pauseStyle()}};g.prototype.disposeHandler=function(h){if(!this.model.dispose){if(c.G.params[this.model.idHeader].autoplay!=="true"||c.G.params[this.model.idHeader].autoplay!==true){this.pauseStyle()}}};return g}());d.Trigger=b});define("com/vod/vodplayer/view/menu/Menu",["require","exports","D","G"],function(c,a,b,e){Object.defineProperty(a,"__esModule",{value:true});var d=(function(){function f(g){this.model=g}f.prototype.init=function(){var h=this.model.u.e("vodMenu").getElementsByTagName("div");for(var g=0;g<h.length;g++){h[g].onmouseover=this.menuOver;h[g].onmouseout=this.menuOut}this.model.u.e("vodMenu").style.display="none";document.oncontextmenu=this.onMenu.bind(this);document.onclick=this.onClick.bind(this)};f.prototype.menuOver=function(g){g.currentTarget.className="active"};f.prototype.menuOut=function(g){g.currentTarget.className=""};f.prototype.onMenu=function(i){if(!e.G.onStage){return true}var h=i||window.event;var g=this.model.u.e("vodMenu").style;g.display="block";g.top=h.clientY+"px";g.left=h.clientX+"px";return false};f.prototype.onClick=function(h){try{this.model.u.e("vodMenu").style.display="none"}catch(g){b.D.consolelog("Menu, "+g)}};return f}());a.Menu=d});define("com/vod/vodplayer/view/playbackrate/PlaybackRatePanel",["require","exports","G","com/vod/vodplayer/E"],function(c,b,d,e){Object.defineProperty(b,"__esModule",{value:true});var a=(function(){function f(g,h){this.radioArr=[];this.model=g;this.controller=h;this.init()}f.prototype.show=function(){this.model.u.display(this.panel,"block");this.resize()};f.prototype.hide=function(){this.model.u.display(this.panel,"none")};f.prototype.resize=function(){this.model.u.x(this.panel,Math.floor((d.G.stageWidth[this.model.idHeader].stageWidth-this.model.u.getWidth(this.panel))/2));this.model.u.y(this.panel,Math.floor((d.G.stageHeight[this.model.idHeader].stageHeight-this.model.u.getHeight(this.panel))/2))};f.prototype.init=function(){this.panel=this.model.u.e("vodRatePanel");this.close=this.model.u.e("vodRatePanelClose");this.model.u.display(this.panel,"none");this.close.addEventListener("click",this.closeHandler.bind(this));var i=this.panel.getElementsByTagName("input");var g;for(var h=0;h<i.length;h++){g=i[h];g.addEventListener("click",this.radioHandler.bind(this));this.radioArr.push(g);if(g.value==="1"){g.checked=true}}this.model.dispatcher.addEventListener(e.E.PLAYBACKRATE,this.rateHandler.bind(this))};f.prototype.rateHandler=function(h){for(var g=0;g<this.radioArr.length;g++){if(Number(this.radioArr[g].value)===this.model.playbackRate){this.radioArr[g].checked=true}else{this.radioArr[g].checked=false}}};f.prototype.radioHandler=function(h){var g=h.currentTarget;this.controller.playbackRate(Number(g.value))};f.prototype.closeHandler=function(g){this.hide()};return f}());b.PlaybackRatePanel=a});define("com/vod/vodplayer/view/Setting",["require","exports","G","com/vod/vodplayer/E","com/vod/vodplayer/view/playbackrate/PlaybackRatePanel"],function(e,c,f,b,a){Object.defineProperty(c,"__esModule",{value:true});var d=(function(){function g(h,i){this.model=h;this.controller=i;this.init()}g.prototype.resize=function(){if(this.ratePanel){this.ratePanel.resize()}};g.prototype.init=function(){this.btn=this.model.u.e("vodSettingBtn");this.ratePanel=new a.PlaybackRatePanel(this.model,this.controller);this.tempClickHandler=this.clickHandler.bind(this);this.btn.addEventListener("click",this.clickHandler.bind(this));this.model.dispatcher.addEventListener(b.E.CLICK_DOCUMENT,this.clickDoc.bind(this));var l=this.model.u.e("vodSettingItems").getElementsByTagName("div");for(var k=0;k<l.length;k++){l[k].onmouseover=this.menuOver;l[k].onmouseout=this.menuOut;l[k].onclick=this.menuClick.bind(this)}var m=this.model.u.e("vodSettingItems").getElementsByTagName("img");for(var h=0;h<m.length;h++){m[h].style.display="none"}};g.prototype.menuClick=function(i){var h=i.currentTarget.id.split("_");switch(h[h.length-1]){case"vodSpeedItem":this.ratePanel.show();this.hide();break;case"vodSpeechItem":break;default:break}};g.prototype.menuOver=function(h){h.currentTarget.className="vodSettingItemHover"};g.prototype.menuOut=function(h){h.currentTarget.className=""};g.prototype.clickHandler=function(j){var i=j.target.parentNode.id;var h=j.target.parentNode.parentNode.id;if(i==="vodSettingItems"||h==="vodSettingItems"){return}var k=this.model.u.e("vodSettingPanel").style.display;if(j.currentTarget===window.document&&k==="block"){this.hide()}else{if(k==="block"){this.hide()}else{if(k!=="block"){this.model.u.display("vodSettingPanel","block");this.model.u.e("vodSettingPanel").style.left=(f.G.stageWidth[this.model.idHeader].stageWidth-156)+"px";this.model.u.e("vodSettingPanel").style.top=(f.G.stageHeight[this.model.idHeader].stageHeight-129)+"px";j.stopPropagation();window.document.addEventListener("click",this.tempClickHandler);this.controller.clickDocument("Setting")}}}};g.prototype.clickDoc=function(){if(this.model.clickDoc!=="Setting"){this.hide()}};g.prototype.hide=function(){window.document.removeEventListener("click",this.tempClickHandler);this.model.u.display("vodSettingPanel","none")};return g}());c.Setting=d});define("com/vod/vodplayer/view/snapshot/Snapshot",["require","exports","G"],function(d,a,c){Object.defineProperty(a,"__esModule",{value:true});var b=(function(){function e(g,f){this.video=g;this.model=f}e.prototype.snapshot=function(l){if(l===void 0){l=null}this.model.u.removeChildren("vodCanvasContainer");this.model.u.display("vodCanvasContainer","block");var g=document.createElement("canvas");var h=g.getContext("2d");var f;var k;if(this.video.videoWidth/this.video.videoHeight>=c.G.stageWidth[this.model.idHeader].stageWidth/c.G.stageHeight[this.model.idHeader].stageHeight){f=c.G.stageWidth[this.model.idHeader].stageWidth;k=Math.floor(f*this.video.videoHeight/this.video.videoWidth)}else{k=c.G.stageHeight[this.model.idHeader].stageHeight;f=Math.floor(k*this.video.videoWidth/this.video.videoHeight)}g.width=c.G.stageWidth[this.model.idHeader].stageWidth;g.height=c.G.stageHeight[this.model.idHeader].stageHieght;var j=Math.floor((c.G.stageWidth[this.model.idHeader].stageWidth-f)/2);var i=Math.floor((c.G.stageHeight[this.model.idHeader].stageHeight-k)/2);h.drawImage(this.video,0,0,this.video.videoWidth,this.video.videoHeight,j,i,f,k);this.model.u.e("vodCanvasContainer").appendChild(g)};return e}());a.Snapshot=b});define("com/vod/vodplayer/view/Video",["require","exports","com/vod/vodplayer/E","D","G","com/vod/vodplayer/controller/utils/Timer","com/vod/vodplayer/view/snapshot/Snapshot"],function(f,e,a,g,d,c,h){Object.defineProperty(e,"__esModule",{value:true});var b=(function(){function i(j,l,k){this.sthIsWrong=false;this.model=j;this.controller=l;this.video=k;this.snapshot=new h.Snapshot(this.video,this.model);this.init()}i.prototype.resize=function(){this.changeScale()};i.prototype.init=function(){this.loading=this.model.u.e("vodLoading");this.model.dispatcher.addEventListener(a.E.CHANGE_SCALE,this.changeScale.bind(this));this.model.dispatcher.addEventListener(a.E.SNAPSHOT,this.snapshotHandler.bind(this));this.model.dispatcher.addEventListener(a.E.PLAY_ING,this.playing.bind(this));this.model.dispatcher.addEventListener(a.E.PLAY_COMPLETE,this.playComplete.bind(this));this.model.dispatcher.addEventListener(a.E.LOADING,this.loadingHandler.bind(this));this.model.dispatcher.addEventListener(a.E.STH_WRONG,this.sthWrong.bind(this));this.videoSizeTimer=new c.Timer(this.videoSizeTimerHandler.bind(this),100);this.videoSizeTimer.start()};i.prototype.videoSizeTimerHandler=function(){if(this.video.videoHeight>0&&this.video.videoWidth>0){this.videoSizeTimer.stop();this.resize()}};i.prototype.changeScale=function(j){if(j===void 0){j=null}this.model.u.e("vodVideoContainer").style.width="100%";this.model.u.e("vodVideoContainer").style.height="100%";this.model.u.x("vodVideoContainer",Math.floor((d.G.stageWidth[this.model.idHeader].stageWidth-this.model.u.getWidth("vodVideoContainer"))/2));this.model.u.y("vodVideoContainer",Math.floor((d.G.stageHeight[this.model.idHeader].stageHeight-this.model.u.getHeight("vodVideoContainer"))/2));this.snapshot.snapshot()};i.prototype.snapshotHandler=function(j){if(j===void 0){j=null}this.snapshot.snapshot()};i.prototype.playing=function(j){if(this.model.playing){this.model.u.display(this.video,"block")}};i.prototype.playComplete=function(j){g.D.d("Video 播放结束")};i.prototype.loadingHandler=function(j){if(this.sthIsWrong){g.D.d("Video sth is wrong, ignores loading. issue: "+this.model.issue);return}if(this.model.loading){this.model.u.display(this.loading,"block")}else{this.model.u.display(this.loading,"none");this.model.u.display("vodCanvasContainer","none")}};i.prototype.sthWrong=function(j){if(this.model.issue>0){g.D.d("Video sth wrong");this.sthIsWrong=true;this.model.u.display(this.loading,"none");this.model.u.display("vodCanvasContainer","none");this.model.u.display(this.video,"none")}else{this.sthIsWrong=false}};return i}());e.Video=b});define("com/vod/vodplayer/view/Quality",["require","exports","G","com/vod/vodplayer/E"],function(c,b,a,e){Object.defineProperty(b,"__esModule",{value:true});var d=(function(){function f(g,h){this.model=g;this.controller=h;this.init()}f.prototype.init=function(){this.btn=this.model.u.e("vodQualityBtn");this.model.u.e("vodQualityPanel").style.display="none";this.tempClickHandler=this.clickHandler.bind(this);this.btn.addEventListener("click",this.tempClickHandler);this.model.dispatcher.addEventListener(e.E.CLICK_DOCUMENT,this.clickDoc.bind(this));this.model.dispatcher.addEventListener(e.E.CHANGE_QUALITY,this.changeQuality.bind(this));this.model.dispatcher.addEventListener(e.E.NO_SD,this.resetMenu.bind(this));this.model.dispatcher.addEventListener(e.E.NO_HD,this.resetMenu.bind(this));var k=this.model.u.e("vodQualityItems").getElementsByTagName("div");for(var h=0;h<k.length;h++){k[h].onmouseover=this.menuOver;k[h].onmouseout=this.menuOut;k[h].onclick=this.menuClick.bind(this)}var l=this.model.u.e("vodQualityItems").getElementsByTagName("img");for(var g=0;g<l.length;g++){l[g].style.display="none"}};f.prototype.resetMenu=function(g){if(this.model.noThisQuality==="sd"){this.btnLabel("hd")}else{if(this.model.noThisQuality==="hd"){this.btnLabel("sd")}}this.btn.removeEventListener("click",this.tempClickHandler);this.model.u.css("vodQuality","vodQualityDisabled")};f.prototype.menuClick=function(h){var g=h.currentTarget.id.split("_");switch(g[g.length-1]){case"vodHDItem":this.controller.changeVideoQuality("hd");break;case"vodSDItem":this.controller.changeVideoQuality("sd");break;default:break}};f.prototype.menuOver=function(g){g.currentTarget.className="vodQualityItemHover";g.currentTarget.getElementsByTagName("img")[0].style.display="block"};f.prototype.menuOut=function(g){g.currentTarget.className="";g.currentTarget.getElementsByTagName("img")[0].style.display="none"};f.prototype.clickHandler=function(g){var h=this.model.u.getDisplay("vodQualityPanel");if(g.currentTarget===window.document&&h==="block"){window.document.removeEventListener("click",this.tempClickHandler);this.model.u.display("vodQualityPanel","none")}else{if(h==="block"){window.document.removeEventListener("click",this.tempClickHandler);this.model.u.display("vodQualityPanel","none")}else{if(h==="none"){this.model.u.display("vodQualityPanel","block");this.model.u.x("vodQualityPanel",a.G.stageWidth[this.model.idHeader].stageWidth-118);if(this.model.u.getHeight("vodQualityPanel")===46){this.model.u.y("vodQualityPanel",a.G.stageHeight[this.model.idHeader].stageHeight-92)}else{if(this.model.u.getHeight("vodQualityPanel")===82){this.model.u.y("vodQualityPanel",a.G.stageHeight[this.model.idHeader].stageHeight-128)}}g.stopPropagation();window.document.addEventListener("click",this.tempClickHandler);this.controller.clickDocument("Quality")}}}};f.prototype.clickDoc=function(){if(this.model.clickDoc!=="Quality"){window.document.removeEventListener("click",this.tempClickHandler);this.model.u.display("vodQualityPanel","none")}};f.prototype.btnLabel=function(g){if(g==="sd"){this.btn.innerHTML="\u6d41\u7545"}else{if(g==="hd"){this.btn.innerHTML="\u9ad8\u6e05"}}};f.prototype.changeQuality=function(g){this.btnLabel(this.model.quality)};return f}());b.Quality=d});define("com/vod/vodplayer/view/FullScreen",["require","exports"],function(c,b){Object.defineProperty(b,"__esModule",{value:true});var a=(function(){function d(e,g,f){this.model=e;this.controller=g;this.stage=f;this.init()}d.prototype.init=function(){this.btn=this.model.u.e("vodFullBtn");this.btn.addEventListener("click",this.clickHandler.bind(this));document.addEventListener("fullscreenchange",this.resize.bind(this));document.addEventListener("webkitfullscreenchange",this.resize.bind(this));document.addEventListener("mozfullscreenchange",this.resize.bind(this));document.addEventListener("MSFullscreenChange",this.resize.bind(this))};d.prototype.clickHandler=function(e){if(this.btn.className==="vodFull vodFullBtn"){this.launchFullscreen(this.stage)}else{if(this.btn.className==="vodFull vodExitFullBtn"){this.exitFullscreen()}}};d.prototype.resize=function(e){var g=document;var f=g.fullscreenElement||g.mozFullScreenElement||g.webkitFullscreenElement||g.msFullscreenElement;if(f){this.btn.className="vodFull vodExitFullBtn"}else{this.btn.className="vodFull vodFullBtn"}};d.prototype.launchFullscreen=function(e){if(e.requestFullscreen){e.requestFullscreen()}else{if(e.mozRequestFullScreen){e.mozRequestFullScreen()}else{if(e.msRequestFullscreen){e.msRequestFullscreen()}else{if(e.webkitRequestFullscreen){e.webkitRequestFullScreen()}else{this.model.alertWindow="\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u5168\u5c4f\u6a21\u5f0f\u3002"}}}}};d.prototype.exitFullscreen=function(){var e=document;if(e.exitFullscreen){e.exitFullscreen()}else{if(e.msExitFullscreen){e.msExitFullscreen()}else{if(e.mozCancelFullScreen){e.mozCancelFullScreen()}else{if(document.webkitExitFullscreen){e.webkitExitFullscreen()}}}}};return d}());b.FullScreen=a});define("com/vod/vodplayer/view/Tips",["require","exports","com/vod/vodplayer/E","G"],function(c,b,e,a){Object.defineProperty(b,"__esModule",{value:true});var d=(function(){function f(g){this.model=g;this.init()}f.prototype.resize=function(){this.errorHandler()};f.prototype.init=function(){this.container=this.model.u.e("vodTipsContainer");this.model.dispatcher.addEventListener(e.E.STH_WRONG,this.errorHandler.bind(this));this.model.dispatcher.addEventListener(e.E.PLAYING,this.removeTips.bind(this))};f.prototype.errorHandler=function(m){if(m===void 0){m=null}if(this.model.playing){return}var l=this.model.issue;if(l<0){return}var k="\u5176\u4ed6\u9519\u8bef\u3002";if(l===0){k="\u62b1\u6b49\uff0c\u89c6\u9891\u914d\u7f6e\u6587\u4ef6\u9519\u8bef\u3002"}else{if(l===1){k="\u5f88\u62b1\u6b49\uff0c\u7531\u4e8e\u7248\u6743\u5546\u7684\u8981\u6c42\uff0c\u60a8\u6240\u5728\u7684\u533a\u57df\u6682\u4e0d\u80fd\u89c2\u770b\u3002"}else{if(l===2){k="\u62b1\u6b49\uff0c\u672a\u627e\u5230\u89c6\u9891\u6587\u4ef6\u3002"}else{if(l===3){k="\u62b1\u6b49\uff0c\u89c6\u9891\u8fde\u63a5\u8d85\u65f6\u3002"}else{if(l===4){k="\u62b1\u6b49\uff0c\u89c6\u9891\u7ec4\u4ef6\u52a0\u8f7d\u5931\u8d25\u3002"}else{if(l===5){k="\u62b1\u6b49\uff0c\u89c6\u9891\u53c2\u6570\u9519\u8bef\u3002"}else{if(l===6){k="\u65e0\u6cd5\u52a0\u8f7d\u4e0d\u652f\u6301\u7684\u89c6\u9891\u6e90"}else{if(l===7){k="\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u0057\u0065\u0062\u0047\u004c"}else{if(l===8){k="hls\u5e93\u52a0\u8f7d\u5931\u8d25"}else{if(l===9){k="hls\u5e93\u52a0\u8f7d\u5931\u8d25"}else{if(l===10){k="\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\uff0c\u8bf7\u4f7f\u7528Google Chrome"}}}}}}}}}}}var g;var j;if(a.G.stageWidth[this.model.idHeader].stageWidth/a.G.stageHeight[this.model.idHeader].stageHeight>1080/608){j=a.G.stageHeight[this.model.idHeader].stageHeight;g=Math.floor(1080*a.G.stageHeight[this.model.idHeader].stageHeight/608)}else{g=a.G.stageWidth[this.model.idHeader].stageWidth;j=Math.floor(a.G.stageWidth[this.model.idHeader].stageWidth*608/1080)}this.container.style.height=j+"px";this.container.style.top=Math.floor((a.G.stageHeight[this.model.idHeader].stageHeight-j)/2)+"px";var i="<div class='vodTipsContent'>"+k+"</div><img class='vodTipsImg' width='"+g+"' height='"+j+"' src='//raw.githubusercontent.com/yangfan1122/docs/gh-pages/assets/errorbg.png' />";this.container.innerHTML=i};f.prototype.removeTips=function(g){if(this.model.playing){this.container.innerHTML=""}};return f}());b.Tips=d});define("com/vod/vodplayer/controller/utils/LoadImg",["require","exports","com/vod/vodplayer/E"],function(c,b,d){Object.defineProperty(b,"__esModule",{value:true});var a=(function(f){__extends(e,f);function e(){var g=f.call(this)||this;g.img=new Image();g.img.addEventListener("load",g.loaded.bind(g));g.img.addEventListener("error",g.error.bind(g));return g}e.prototype.load=function(g){this.img.src=g};Object.defineProperty(e.prototype,"image",{get:function(){return this.img},enumerable:true,configurable:true});e.prototype.loaded=function(){this.dispatch(d.E.IMG_LOADED)};e.prototype.error=function(){this.dispatch(d.E.IMG_FAILED)};return e}(d.E));b.LoadImg=a});define("com/vod/vodplayer/view/Cover",["require","exports","com/vod/vodplayer/E","D","com/vod/vodplayer/controller/utils/LoadImg","G"],function(d,a,e,c,f,g){Object.defineProperty(a,"__esModule",{value:true});var b=(function(){function h(i,j){this.removed=false;this.model=i;this.controller=j;this.init()}h.prototype.resize=function(){if(!this.img||isNaN(this.originWidth)||isNaN(this.originHeight)){return}var i;var j;if(this.originWidth/this.originHeight>=g.G.stageWidth[this.model.idHeader].stageWidth/g.G.stageHeight[this.model.idHeader].stageHeight){i=g.G.stageWidth[this.model.idHeader].stageWidth;j=Math.floor(i*this.originHeight/this.originWidth)}else{j=g.G.stageHeight[this.model.idHeader].stageHeight;i=Math.floor(j*this.originWidth/this.originHeight)}this.model.u.width(this.img.image,i);this.model.u.height(this.img.image,j);this.model.u.x(this.img.image,Math.floor((g.G.stageWidth[this.model.idHeader].stageWidth-i)/2));this.model.u.y(this.img.image,Math.floor((g.G.stageHeight[this.model.idHeader].stageHeight-j)/2))};Object.defineProperty(h.prototype,"visible",{set:function(i){if(this.removed){this.model.u.display(this.coverContainer,"none");return}if(i){this.model.u.display(this.coverContainer,"block")}else{this.model.u.display(this.coverContainer,"none")}},enumerable:true,configurable:true});h.prototype.init=function(){this.coverContainer=this.model.u.e("vodCoverContainer");this.model.dispatcher.addEventListener(e.E.COVER_URL,this.coverHandler.bind(this));this.model.dispatcher.addEventListener(e.E.REMOVE_COVER,this.removeCover.bind(this));this.model.dispatcher.addEventListener(e.E.STH_WRONG,this.sthWrong.bind(this));this.img=new f.LoadImg();this.tempImageHandler=this.imageHandler.bind(this);this.img.dispatcher.addEventListener(e.E.IMG_LOADED,this.tempImageHandler);this.img.dispatcher.addEventListener(e.E.IMG_FAILED,this.tempImageHandler)};h.prototype.coverHandler=function(i){this.img.load(this.model.coverURL)};h.prototype.imageHandler=function(i){this.img.dispatcher.removeEventListener(e.E.IMG_LOADED,this.tempImageHandler);this.img.dispatcher.removeEventListener(e.E.IMG_FAILED,this.tempImageHandler);this.tempImageHandler=null;if(i.type===e.E.IMG_LOADED){this.originWidth=this.img.image.width;this.originHeight=this.img.image.height;this.coverContainer.appendChild(this.img.image);this.resize();this.visible=true}else{if(i.type===e.E.IMG_FAILED){c.D.d("缩略图加载失败")}}};h.prototype.removeCover=function(i){if(i===void 0){i=null}this.removed=true;this.visible=false};h.prototype.sthWrong=function(i){if(this.model.issue>0){this.removeCover()}};return h}());a.Cover=b});define("com/vod/vodplayer/view/Alert",["require","exports","com/vod/vodplayer/E","G"],function(b,a,d,e){Object.defineProperty(a,"__esModule",{value:true});var c=(function(){function f(g){this.model=g;this.init()}f.prototype.init=function(){this.container=this.model.u.e("vodAlertPanel");this.model.u.display(this.container,"none");this.tempClickHandler=this.clickDocument.bind(this);this.tempAlertHandler=this.alertHandler.bind(this);this.model.dispatcher.addEventListener(d.E.ALERT,this.tempAlertHandler)};f.prototype.alertHandler=function(g){var h=this.model.u.getDisplay(this.container);if(h==="none"){this.model.u.display(this.container,"block");this.model.u.x(this.container,e.G.stageWidth[this.model.idHeader].stageWidth-210);this.model.u.y(this.container,e.G.stageHeight[this.model.idHeader].stageHeight-106);this.container.innerHTML="<div>"+this.model.alertWindow+"</div>";window.document.addEventListener("click",this.tempClickHandler,true)}};f.prototype.clickDocument=function(g){if(g.eventPhase===Event.BUBBLING_PHASE){window.document.removeEventListener("click",this.tempClickHandler);this.model.dispatcher.addEventListener(d.E.ALERT,this.tempAlertHandler)}else{if(g.eventPhase===Event.CAPTURING_PHASE){window.document.removeEventListener("click",this.tempClickHandler,true);this.model.dispatcher.removeEventListener(d.E.ALERT,this.tempAlertHandler);window.document.addEventListener("click",this.tempClickHandler);this.model.u.display(this.container,"none")}}};return f}());a.Alert=c});define("com/vod/vodplayer/view/vr/VRVideo",["require","exports","com/vod/vodplayer/controller/utils/Utils","D","G"],function(d,c,a,b,e){Object.defineProperty(c,"__esModule",{value:true});var f=(function(){function g(h,j,i){this.model=h;this.controller=j;this.video=i;this.init()}g.prototype.resize=function(){var i;try{i=this.renderer.domElement}catch(h){return}this.camera.aspect=e.G.stageWidth[this.model.idHeader].stageWidth/e.G.stageHeight[this.model.idHeader].stageHeight;this.model.u.width(i,e.G.stageWidth[this.model.idHeader].stageWidth);this.model.u.height(i,e.G.stageHeight[this.model.idHeader].stageHeight)};g.prototype.init=function(){var l=this;this.video.setAttribute("crossorigin","anonymous");var i=this;var h="";if(a.Utils.isLocal()){h="../../../../../../libs/three"}else{h="//cdn.rawgit.com/yangfan1122/docs/gh-pages/assets/three.min.js"}var k;try{k=bowlder.run}catch(j){b.D.w("no bowlder.run");k=d}k([h],function(m){l.model.u.display(i.video,"none");i.thisTime=(new Date()).getTime();i.scene=new m.Scene();i.camera=new m.PerspectiveCamera(50,e.G.stageWidth[l.model.idHeader].stageWidth/e.G.stageHeight[l.model.idHeader].stageHeight,0.1,1000);i.camera.position.set(-90,15,0);if(l.webGLDetector()){i.renderer=new m.WebGLRenderer()}else{l.model.issue=7;b.D.e("WebGL is unsupported!");return}i.renderer.setSize(e.G.stageWidth[l.model.idHeader].stageWidth,e.G.stageHeight[l.model.idHeader].stageHeight);i.renderer.autoClear=false;i.renderer.setClearColor(3355443,1);l.model.u.e("vodVRContainer").appendChild(i.renderer.domElement);l.model.u.height("vodVRContainer",e.G.stageHeight[l.model.idHeader].stageHeight);i.renderer.domElement.addEventListener("mousewheel",i.onMouseWheel.bind(i),false);i.texture=new m.Texture(i.video);i.texture.generateMipmaps=false;i.texture.minFilter=m.LinearFilter;i.texture.magFilter=m.LinearFilter;i.texture.format=m.RGBFormat;i.sphere=new m.SphereGeometry(Math.floor(e.G.stageWidth[l.model.idHeader].stageWidth/2),80,80);i.mesh=new m.Mesh(i.sphere,new m.MeshBasicMaterial({map:i.texture}));i.mesh.scale.x=-1;i.scene.add(i.mesh);i.animate();i.controls=new m.OrbitControls(i.camera,i.renderer.domElement)},function(m){b.D.e(m);i.controller.toggle(false);i.model.issue=4})};g.prototype.onMouseWheel=function(h){if(h.wheelDelta<0&&this.controls.spherical.radius>Math.floor(e.G.stageWidth[this.model.idHeader].stageWidth/2)){this.controls.enableZoom=false}else{if(h.wheelDelta>0){this.controls.enableZoom=true}}};g.prototype.animate=function(){this.requestAnimationId=requestAnimationFrame(this.animate.bind(this));if(this.video.readyState===this.video.HAVE_ENOUGH_DATA){if(typeof(this.texture)!=="undefined"){var h=new Date().getTime();if(h-this.thisTime>=30){this.texture.needsUpdate=true;this.thisTime=h}}}this.camera.updateProjectionMatrix();this.renderer.clear();this.renderer.render(this.scene,this.camera)};g.prototype.webGLDetector=function(){try{var h=document.createElement("canvas");if(window.WebGLRenderingContext&&(h.getContext("webgl")||h.getContext("experimental-webgl"))){return true}else{return false}}catch(i){return false}};return g}());c.VRVideo=f});define("com/vod/vodplayer/view/UI",["require","exports","G"],function(b,a,d){Object.defineProperty(a,"__esModule",{value:true});var c=(function(){function e(R,ad){this.dataIdHeader="";this.model=ad;this.container=R;this.dataIdHeader=R.id+"_";var al=this.div("vodCtrlContainer","vodCtrlContainer");var B=this.div("vodProgressBar vodplayerdiv","vodProgressBar");var ag=this.div("vodSlider","vodSlider");var S=this.div("vodBars","vodBars");var Y=this.div("vodProgressBg vodplayerdiv");var ap=this.div("vodLoadingBar vodplayerdiv","vodLoadingBar");var M=this.div("vodPlayingBar vodplayerdiv","vodPlayingBar");var V=this.div("vodFocusBarContainer","vodFocusBarContainer");S.appendChild(Y);S.appendChild(ap);S.appendChild(M);S.appendChild(V);B.appendChild(ag);B.appendChild(S);var aa=this.div("vodBtns");var G=this.div("vodPlayBtn","vodToggleContainer");var u=this.div("vodPlayBtn","vodToggle");G.appendChild(u);var t=this.div("vodVolumeBtn","vodVolumeBtnContainer");var ab=this.div("vodVolumeBtn","vodVolumeBtn");t.appendChild(ab);var am=this.div("vodVolumeBar","vodVolumeBar");var X=this.div("vodVolumeSlider","vodVolumeSlider");var n=this.div("vodVolumeBars","vodVolumeBars");var A=this.div("vodVolumeBg");var Z=this.div("vodVolumeMoving","vodVolumeMoving");var aj=this.div("vodTime","vodTime");n.appendChild(A);n.appendChild(Z);am.appendChild(X);am.appendChild(n);am.appendChild(aj);var K=this.div("vodCheckContainer","vodCheckContainer");var T=this.div("vodSetting","vodSetting");var J=this.div("vodSetting","vodSettingBtn");T.appendChild(J);var W=this.div("vodQuality","vodQuality");var p=this.div("","vodQualityBtn");W.appendChild(p);var j=this.div("vodFull","vodFull");var x=this.div("vodFull vodFullBtn","vodFullBtn");j.appendChild(x);aa.appendChild(G);aa.appendChild(t);aa.appendChild(am);aa.appendChild(K);aa.appendChild(T);aa.appendChild(W);aa.appendChild(j);al.appendChild(B);al.appendChild(aa);var v=this.div("vodVideoContainer","vodVideoContainer");var H=this.div("vodTipsContainer","vodTipsContainer");var ak=this.div("vodCoverContainer","vodCoverContainer");var F=this.div("vodLoading","vodLoading");var ao=this.div("","vodCanvasContainer");var C=this.div("","vodVRContainer");var ar=this.video("vodVideo","vodVideo");v.appendChild(H);v.appendChild(ak);v.appendChild(F);v.appendChild(ao);v.appendChild(C);v.appendChild(ar);var g=this.div("vodMenu","vodMenu");var l=this.div("");l.style.display="none";var s=this.anchor("#","\u67e5\u770b\u65e5\u5fd7");l.appendChild(s);var k=this.div("");var ai=this.anchor("#","vod","_blank");k.appendChild(ai);var i=this.div("");i.innerHTML=d.G.version;g.appendChild(l);g.appendChild(k);g.appendChild(i);var y=this.div("vodSettingPanel","vodSettingPanel");var f=this.div("");f.innerHTML="\u8bbe\u7f6e";var N=document.createElement("li");N.className="vodSettingPanelLine";var E=this.div("vodSettingItems","vodSettingItems");var D=this.div("","vodSpeedItem");var h=this.span("\u901f\u5ea6");D.appendChild(h);E.appendChild(D);y.appendChild(f);y.appendChild(N);y.appendChild(E);var q=this.div("vodQualityPanel","vodQualityPanel");var w=this.div("vodQualityItems","vodQualityItems");var r=this.div("","vodHDItem");var af=this.img("//raw.githubusercontent.com/yangfan1122/docs/gh-pages/assets/tick.png");var U=this.span("\u9ad8\u6e05");r.appendChild(af);r.appendChild(U);var ah=this.div("","vodSDItem");var L=this.img("//raw.githubusercontent.com/yangfan1122/docs/gh-pages/assets/tick.png");var aq=this.span("\u6d41\u7545");ah.appendChild(L);ah.appendChild(aq);w.appendChild(r);w.appendChild(ah);q.appendChild(w);var ac=this.div("vodAlertPanel","vodAlertPanel");var I=this.div("vodFocusPanel","vodFocusPanel");var ae=this.div("vodRatePanel","vodRatePanel");var o=this.div("vodRatePanelTitle");o.innerHTML="\u64ad\u653e\u901f\u5ea6";var an=this.div("");var Q=this.input("radio","1");var P=this.input("radio","2");var O=this.input("radio","3");an.appendChild(Q);an.innerHTML+="\u9ed8\u8ba4";an.appendChild(P);an.innerHTML+="2\u500d ";an.appendChild(O);an.innerHTML+="3\u500d ";var z=this.div("vodRatePanelClose","vodRatePanelClose");z.innerHTML="[\u5173\u95ed]";ae.appendChild(o);ae.appendChild(an);ae.appendChild(z);this.model.u.removeChildren(this.container);this.container.appendChild(al);this.container.appendChild(v);this.container.appendChild(g);this.container.appendChild(y);this.container.appendChild(q);this.container.appendChild(ac);this.container.appendChild(I);this.container.appendChild(ae)}e.prototype.div=function(f,h){var g=document.createElement("div");if(f.length>0){g.className=f}if(h!==undefined){g.id=this.dataIdHeader+h}return g};e.prototype.video=function(g,h){var f=document.createElement("video");if(g.length>0){f.className=g}if(h!==undefined){f.id=this.dataIdHeader+h}f.setAttribute("webkit-playsinline","true");f.setAttribute("playsinline","true");return f};e.prototype.img=function(g){var f=document.createElement("img");f.src=g;return f};e.prototype.span=function(g){var f=document.createElement("span");f.innerHTML=g;return f};e.prototype.input=function(g,h){var f=document.createElement("input");f.type=g;f.value=h;return f};e.prototype.anchor=function(g,h,i){var f=document.createElement("a");f.href=g;f.innerHTML=h;if(i!==undefined){f.target=i}return f};return e}());a.UI=c});define("com/vod/vodplayer/view/check/CheckPanelBody",["require","exports","com/vod/vodplayer/E"],function(c,b,d){Object.defineProperty(b,"__esModule",{value:true});var a=(function(){function e(f,h,g){this.model=f;this.controller=h;this.ui=g}e.prototype.init=function(){var f=this.model.u.e("vodCheckContainer");var g=this.ui.div("","vodCheckSpeedMenu");g.innerHTML="1\u500d";f.appendChild(g);this.menu=this.model.u.e("vodCheckSpeedMenu");this.menu.addEventListener("click",this.clickHandler.bind(this));this.model.dispatcher.addEventListener(d.E.PLAYBACKRATE,this.rateHandler.bind(this))};e.prototype.rateHandler=function(g){var f=this.model.playbackRate+"\u500d";this.menu.innerHTML=f};e.prototype.clickHandler=function(g){var f=this.menu.innerHTML;if(f==="1\u500d"){this.controller.playbackRate(2)}else{if(f==="2\u500d"){this.controller.playbackRate(3)}else{if(f==="3\u500d"){this.controller.playbackRate(1)}else{this.controller.playbackRate(1)}}}};return e}());b.CheckPanelBody=a});define("com/vod/vodplayer/view/hls/HLSVideo",["require","exports","G","D","com/vod/vodplayer/E","com/vod/vodplayer/view/snapshot/Snapshot","com/vod/vodplayer/controller/utils/Utils"],function(c,b,g,a,d,e,h){Object.defineProperty(b,"__esModule",{value:true});var f=(function(){function i(j,n,l,k){this.model=j;this.controller=n;this.video=l;this.snapshot=new e.Snapshot(this.video,this.model);this.init()}i.prototype.resize=function(){this.changeScale()};i.prototype.init=function(){var n=this;this.loading=this.model.u.e("vodLoading");var j=this;var m="";if(h.Utils.isLocal()){m="../../../../../../libs/hls.min"}else{m="//cdn.rawgit.com/yangfan1122/docs/gh-pages/assets/hls.min.js"}var l;try{l=bowlder.run}catch(k){a.D.w("no bowlder.run");l=c}l([m],function(o){a.D.d("HLS Lib loaded");j.HLSStatic=o;if(n.model.hlsSrc.length>0){j.loadHLS()}},function(o){a.D.e(o);j.controller.toggle(false);j.model.issue=8});this.model.dispatcher.addEventListener(d.E.HLS_SRC,this.loadHLS.bind(this));this.model.dispatcher.addEventListener(d.E.SNAPSHOT,this.snapshotHandler.bind(this));this.model.dispatcher.addEventListener(d.E.CHANGE_SCALE,this.changeScale.bind(this));this.model.dispatcher.addEventListener(d.E.LOADING,this.loadingHandler.bind(this))};i.prototype.loadHLS=function(j){if(!this.HLSStatic){return}if(this.hls){this.hls.destroy();this.hls=null}this.hls=new this.HLSStatic();this.hls.on(this.HLSStatic.Events.MEDIA_ATTACHED,this.attached.bind(this));this.hls.attachMedia(this.video)};i.prototype.attached=function(j){a.D.d("hls attached, model.hlsSrc = "+this.model.hlsSrc);this.hls.on(this.HLSStatic.Events.MANIFEST_PARSED,this.manifestParsed.bind(this));this.hls.on(this.HLSStatic.Events.ERROR,this.errorHandler.bind(this));var k=this.model.hlsSrc;if(k.indexOf("?")>-1){k+="&"+(new Date()).getTime()}else{k+="?"+(new Date()).getTime()}this.hls.loadSource(k)};i.prototype.manifestParsed=function(j){a.D.d("manifestParsed");this.model.dispatch(d.E.HLS_MANIFEST_PARSED)};i.prototype.errorHandler=function(l,n){var m=n.type;var k=n.details;var j=n.fatal;a.D.consolelog("errorDetails: "+k);if(j){switch(m){case this.HLSStatic.ErrorTypes.NETWORK_ERROR:a.D.e("fatal network error encountered, try to recover");this.hls.startLoad();break;case this.HLSStatic.ErrorTypes.MEDIA_ERROR:a.D.e("fatal media error encountered, try to recover");this.hls.recoverMediaError();break;default:a.D.e("cannot recover");this.hls.destroy();break}}};i.prototype.snapshotHandler=function(j){this.snapshot.snapshot()};i.prototype.changeScale=function(j){if(j===void 0){j=null}this.model.u.e("vodVideoContainer").style.width="100%";this.model.u.e("vodVideoContainer").style.height="100%";this.model.u.x("vodVideoContainer",Math.floor((g.G.stageWidth[this.model.idHeader].stageWidth-this.model.u.getWidth("vodVideoContainer"))/2));this.model.u.y("vodVideoContainer",Math.floor((g.G.stageHeight[this.model.idHeader].stageHieght-this.model.u.getHeight("vodVideoContainer"))/2));this.snapshot.snapshot()};i.prototype.loadingHandler=function(j){if(this.model.loading){this.model.u.display(this.loading,"block")}else{this.model.u.display(this.loading,"none");this.model.u.display("vodCanvasContainer","none")}};return i}());b.HLSVideo=f});define("com/vod/vodplayer/view/flv/FlvVideo",["require","exports","com/vod/vodplayer/controller/utils/Utils","com/vod/vodplayer/view/snapshot/Snapshot","D","G","com/vod/vodplayer/E"],function(e,c,h,f,b,g,d){Object.defineProperty(c,"__esModule",{value:true});var a=(function(){function i(j,n,l,k){this.model=j;this.controller=n;this.video=l;this.snapshot=new f.Snapshot(this.video,this.model);this.init()}i.prototype.resize=function(){this.changeScale()};i.prototype.init=function(){var n=this;this.loading=this.model.u.e("vodLoading");var j=this;var m="";if(h.Utils.isLocal()){m="../../../../../../libs/flv.min"}else{m="//cdn.rawgit.com/yangfan1122/docs/gh-pages/assets/flv.min.js"}var l;try{l=bowlder.run}catch(k){b.D.w("no bowlder.run");l=e}l([m],function(o){b.D.d("flv.js Lib loaded");j.flvStatic=o;j.flvjs=o.flvjs;if(n.model.flvSrc.length>0){j.loadFlv()}},function(o){b.D.e(o);j.controller.toggle(false);j.model.issue=9});this.model.dispatcher.addEventListener(d.E.FLV_SRC,this.loadFlv.bind(this));this.model.dispatcher.addEventListener(d.E.SNAPSHOT,this.snapshotHandler.bind(this));this.model.dispatcher.addEventListener(d.E.CHANGE_SCALE,this.changeScale.bind(this));this.model.dispatcher.addEventListener(d.E.LOADING,this.loadingHandler.bind(this))};i.prototype.loadFlv=function(){if(!this.flvStatic){return}if(this.flvPlayer){this.flvPlayer.destroy();this.flvPlayer=null}b.D.d("this.model.flvSrc = "+this.model.flvSrc);if(this.flvStatic.isSupported()){var j=this.model.flvSrc;if(j.indexOf("?")>-1){j+="&"+(new Date()).getTime()}else{j+="?"+(new Date()).getTime()}this.flvPlayer=this.flvStatic.createPlayer({type:"flv",url:j});this.flvPlayer.attachMediaElement(this.video);this.flvPlayer.load()}else{this.model.issue=10}};i.prototype.snapshotHandler=function(j){this.snapshot.snapshot()};i.prototype.changeScale=function(j){if(j===void 0){j=null}this.model.u.e("vodVideoContainer").style.width="100%";this.model.u.e("vodVideoContainer").style.height="100%";this.model.u.x("vodVideoContainer",Math.floor((g.G.stageWidth[this.model.idHeader].stageWidth-this.model.u.getWidth("vodVideoContainer"))/2));this.model.u.y("vodVideoContainer",Math.floor((g.G.stageHeight[this.model.idHeader].stageHieght-this.model.u.getHeight("vodVideoContainer"))/2));this.snapshot.snapshot()};i.prototype.loadingHandler=function(j){if(this.model.loading){this.model.u.display(this.loading,"block")}else{this.model.u.display(this.loading,"none");this.model.u.display("vodCanvasContainer","none")}};return i}());c.FlvVideo=a});define("com/vod/vodplayer/view/View",["require","exports","G","com/vod/vodplayer/view/utils/U","com/vod/vodplayer/view/ProgressBar","D","com/vod/vodplayer/E","com/vod/vodplayer/view/Volume","com/vod/vodplayer/view/Trigger","com/vod/vodplayer/view/menu/Menu","com/vod/vodplayer/view/Setting","com/vod/vodplayer/view/Video","com/vod/vodplayer/view/Quality","com/vod/vodplayer/view/FullScreen","com/vod/vodplayer/view/Tips","com/vod/vodplayer/view/Cover","com/vod/vodplayer/view/Alert","com/vod/vodplayer/view/vr/VRVideo","com/vod/vodplayer/controller/utils/Timer","com/vod/vodplayer/view/check/CheckPanelBody","com/vod/vodplayer/view/hls/HLSVideo","com/vod/vodplayer/view/UI","com/vod/vodplayer/view/flv/FlvVideo"],function(j,w,b,h,q,d,v,o,p,x,n,f,c,u,m,l,g,a,k,r,s,i,e){Object.defineProperty(w,"__esModule",{value:true});var t=(function(){function y(z,B,A){this.observerConfig={childList:true,attributes:true,characterData:true,subtree:true,attributeOldValue:true,characterDataOldValue:true};this.model=z;this.controller=B;this.container=A;this.init();this.controller.init()}y.prototype.init=function(){this.container.className="vodplayercontainer";var B=new h.U(this.container.id);this.model.u=B;this.model.idHeader=this.container.id;var D=new i.UI(this.container,this.model);b.G.movieInfo[this.model.idHeader]={};this.mouseLeaveHandler();b.G.stageWidth[this.model.idHeader]={};b.G.stageHeight[this.model.idHeader]={};b.G.stageWidth[this.model.idHeader].stageWidth=this.container.clientWidth;b.G.stageHeight[this.model.idHeader].stageHeight=this.container.clientHeight;var F=new x.Menu(this.model);F.init();this.progressBar=new q.ProgressBar(this.model,this.controller);this.volume=new o.Volume(this.model,this.controller);this.trigger=new p.Trigger(this.model,this.controller);this.setting=new n.Setting(this.model,this.controller);this.quality=new c.Quality(this.model,this.controller);this.fullScreen=new u.FullScreen(this.model,this.controller,this.container);this.tips=new m.Tips(this.model);this.cover=new l.Cover(this.model,this.controller);this.alertWin=new g.Alert(this.model);if(b.G.params[this.model.idHeader].check==="1"&&b.G.stageWidth[this.model.idHeader].stageWidth>408){var E=new r.CheckPanelBody(this.model,this.controller,D);E.init();var z=b.G.params[this.model.idHeader].playbackrate;if(z==="1"||z==="2"||z==="3"){this.controller.playbackRateDefault=z}}else{if(b.G.params[this.model.idHeader].check==="1"&&b.G.stageWidth[this.model.idHeader].stageWidth<408){d.D.e("stageWidth is not wide enough!")}}this.model.dispatcher.addEventListener(v.E.VTYPE,this.vtypeHandler.bind(this));this.resizeTimer=new k.Timer(this.containerResizeHandler.bind(this),50);this.resizeTimer.start();if(b.G.params[this.model.idHeader].control==="1"){this.container.addEventListener("mouseleave",this.mouseLeaveHandler.bind(this));this.container.addEventListener("mouseenter",this.mouseEnterHandler.bind(this))}var C=this.model.u.e("vodVideoContainer");var A=this.model.u.e("vodCtrlContainer");C.tabIndex=0;A.tabIndex=0;C.addEventListener("keyup",this.keyboard.bind(this));A.addEventListener("keyup",this.keyboard.bind(this))};y.prototype.containerResizeHandler=function(z){if(z===void 0){z=false}if(this.model.u.getWidth(this.container)===0){if(!this.model.dispose){this.model.dispose=true}this.resizeTimer.stop();return}else{if(this.model.u.getWidth(this.container)>0){if(this.model.dispose){this.model.dispose=false}}}if(b.G.stageWidth[this.model.idHeader].stageWidth!==this.model.u.getWidth(this.container)||z){b.G.stageHeight[this.model.idHeader].stageHeight=this.model.u.getHeight(this.container);b.G.stageWidth[this.model.idHeader].stageWidth=this.model.u.getWidth(this.container);d.D.d("container resize, "+b.G.stageWidth[this.model.idHeader].stageWidth+"*"+b.G.stageHeight[this.model.idHeader].stageHeight);this.progressBar.resize();this.video.resize();this.tips.resize();this.cover.resize();this.setting.resize()}};y.prototype.vtypeHandler=function(z){d.D.d("this.model.vType = "+this.model.vType);if(this.model.vType===1){this.video=new a.VRVideo(this.model,this.controller,this.model.u.e("vodVideo"))}else{if(this.model.vType===2){this.video=new s.HLSVideo(this.model,this.controller,this.model.u.e("vodVideo"),this.container)}else{if(this.model.vType===3){this.video=new e.FlvVideo(this.model,this.controller,this.model.u.e("vodVideo"),this.container)}else{this.video=new f.Video(this.model,this.controller,this.model.u.e("vodVideo"))}}}this.containerResizeHandler(true)};y.prototype.mouseLeaveHandler=function(z){if(z===void 0){z=null}this.model.u.css("vodCtrlContainer","vodCtrlContainer vodAlphaOut");b.G.onStage=false};y.prototype.mouseEnterHandler=function(z){this.model.u.css("vodCtrlContainer","vodCtrlContainer vodAlphaIn");b.G.onStage=true};y.prototype.keyboard=function(z){var C=b.G.movieInfo[this.model.idHeader].duration;var B=this.model.timeupdate;var A;var D=5;if(z.key==="ArrowLeft"){A=(B*C-D)/C;if(A<0){A=0}this.controller.seek(A)}else{if(z.key==="ArrowRight"){A=(B*C+D)/C;if(A>1){A=1}this.controller.seek(A)}}};return y}());w.View=t});define("com/vod/vodplayer/controller/params/Params",["require","exports","G"],function(b,a,c){Object.defineProperty(a,"__esModule",{value:true});var d=(function(){function e(){}e.init=function(f,g){c.G.params[g]={};c.G.params[g].topicid=this.isNumber(f.topicid?f.topicid:"");c.G.params[g].pltype=this.isNumber(f.pltype?f.pltype:"");c.G.params[g].vid=this.isNumberAndLetter(f.vid?f.vid:"");c.G.params[g].sid=this.isNumberAndLetter(f.sid?f.sid:"");c.G.params[g].iplimit=this.isNumber(f.iplimit?f.iplimit:"");c.G.params[g].loop=this.isNumber(f.loop?f.loop:"");c.G.params[g].vr=this.isNumber(f.vr?f.vr:"0");c.G.params[g].stat=this.isNumber(f.stat?f.stat:"0");c.G.params[g].muted=this.isNumber(f.muted?f.muted:"");if(f.control===0||f.control==="0"){c.G.params[g].control="0"}else{c.G.params[g].control="1"}c.G.params[g].coverpic=f.coverpic?f.coverpic:"";c.G.params[g].autoplay=f.autoplay?f.autoplay:false;c.G.params[g].videoadv=f.videoadv?f.videoadv:"";c.G.params[g].videoSource=f.videoSource?f.videoSource:"";c.G.params[g].focusJson=f.focusJson?f.focusJson:"";c.G.params[g].check=this.isNumber(f.check?f.check:"0");c.G.params[g].playbackrate=this.isNumber(f.playbackrate?f.playbackrate:"");c.G.params[g].starttime=this.isNumber(f.starttime?f.starttime:"0");c.G.params[g].endtime=this.isNumber(f.endtime?f.endtime:"0");if(Number(c.G.params[g].starttime)>Number(c.G.params[g].endtime)){c.G.params[g].endtime=Infinity}};e.isNumber=function(f){var g=new RegExp("^[0-9]*$");if(g.test(f)){return String(f)}else{return""}};e.isNumberAndLetter=function(g){var f=new RegExp("^[A-Za-z0-9]+$");if(f.test(g)){return String(g)}else{return""}};return e}());a.Params=d});define("com/vod/vodplayer/Main",["require","exports","com/vod/vodplayer/model/Model","com/vod/vodplayer/view/View","com/vod/vodplayer/controller/Controller","com/vod/vodplayer/controller/params/Params"],function(d,b,e,f,c,a){Object.defineProperty(b,"__esModule",{value:true});var g=(function(){function h(i,j){this.container=i;this.params=j}h.prototype.init=function(){a.Params.init(this.params,this.container.id);this.model=new e.Model();this.controller=new c.Controller(this.model);this.view=new f.View(this.model,this.controller,this.container)};return h}());b.Main=g});define("VODPlayer",["require","exports","com/vod/vodplayer/Main"],function(c,b,a){Object.defineProperty(b,"__esModule",{value:true});var d=(function(){function e(g,h){var f=new a.Main(g,h);f.init()}return e}());b.VODPlayer=d});








</script>




<div style="width:960px; height:520px">
<div id="vodcontainer"></div>
<script>

require(["VODPlayer"], function(VODPlayer) {
    VODPlayer.VODPlayer(document.getElementById("vodcontainer"), {
        coverpic:"",
        autoplay:"false",
        loop:"0",
        muted:"1",
        control:"1",
        vr:0,
        focusJson:"",
        videoSource:"https://flv4.bn.netease.com/videolib3/1711/17/deiQN4763/SD/deiQN4763-mobile.mp4"
    });
});

</script>
</div>
<p>{{ page.date | date_to_string }}</p>

